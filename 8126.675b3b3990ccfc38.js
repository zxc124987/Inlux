"use strict";(self["webpackChunkinnolux"]=self["webpackChunkinnolux"]||[]).push([[8126],{1919:function(e,t,a){a.d(t,{Z:function(){return i}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"table-responsive"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.data,"row-key":e.getRowKeys,"default-sort":{prop:"id",order:"ascending"},"empty-text":"查無資料","cell-class-name":e.rowStyleHandler,border:"","highlight-current-row":""},on:{"selection-change":e.selectChangeHandler}},[e._t("custom-selection"),e._t("custom-checkbox1"),e._t("custom-checkbox2"),e._l(e.tableColumns,(function(a,s){return t("el-table-column",{key:s,attrs:{prop:a.id,label:a.label,width:a.width,sortable:"date"===a.id},scopedSlots:e._u([{key:"default",fn:function(s){return["status"===a.id?t("el-tag",{attrs:{type:"簽核通過"===s.row.status||"審核通過"===s.row.status?"success":"拒絕申請"===s.row.status?"danger":"草稿"===s.row.status?"warning":"查無資料"}},[e._v(" "+e._s(s.row.status)+" ")]):"status_Id"===a.id?t("el-tag",{attrs:{type:"OPEN"===s.row.status_Id?"":"CLOSE"===s.row.status_Id?"danger":"FULL"===s.row.status_Id?"warning":"success"}},[e._v(" "+e._s(e.getCourseState(s.row.status_Id))+" ")]):"description2"===a.id?t("el-tag",{attrs:{type:"有效課程"===s.row.description?"":"danger"}},[e._v(" "+e._s(s.row.description)+" ")]):"approve_Status"===a.id?t("el-tag",{attrs:{type:"0"===s.row.approve_Status?"":"1"===s.row.approve_Status?"success":"danger"}},[e._v(" "+e._s(e.getApproveStatus(s.row.approve_Status))+" ")]):"approve_Status2"===a.id?t("el-tag",{attrs:{type:"審核中"===s.row.approve_Status2||"未審核"===s.row.approve_Status2?"":"審核完畢"===s.row.approve_Status2||"審核同意"===s.row.approve_Status2?"success":"danger"}},[e._v(" "+e._s(s.row.approve_Status2)+" ")]):"attend_Status"===a.id?t("el-tag",{attrs:{type:"0"===s.row.attend_Status?"":"1"===s.row.attend_Status?"success":"danger"}},[e._v(" "+e._s(e.getAttendStatus(s.row.attend_Status))+" ")]):"issue_Card"===a.id?t("el-tag",{attrs:{type:"0"===s.row.issue_Card?"":"1"===s.row.issue_Card?"success":"danger"}},[e._v(" "+e._s(e.getIssueCardStatus(s.row.issue_Card))+" ")]):"signUpStatus"===a.id?t("el-tag",{attrs:{type:"已結案"===e.signUpStatus(s.row.signUpStatus,s.row.approveStatus)?"success":"可取消報名"===e.signUpStatus(s.row.signUpStatus,s.row.approveStatus)?"danger":""}},[e._v(" "+e._s(e.signUpStatus(s.row.signUpStatus,s.row.approveStatus))+" ")]):"file_Name"===a.id||"d_File_Name"===a.id?t("a",{attrs:{href:"#"},on:{click:function(t){return e.downloadPdf(s.row)}}},[e._v(e._s(s.row[a.id]))]):"protocolInfo"===a.id?t("div",[t("div",[e._v(e._s(s.row.po_Name))]),e._l(s.row.files,(function(a){return t("div",[t("a",{attrs:{href:"#"},on:{click:function(t){return e.downloadPdf(a)}}},[e._v(e._s(a.file_Name))])])}))],2):"useable"===a.id&&"已刪除(廠商不可申請每日工單)"===s.row.useable?t("span",{staticStyle:{color:"red"}},[e._v(e._s(s.row.useable))]):"deleted"===a.id?t("span",{class:{"text-danger":"1"===s.row.deleted}},[e._v(" "+e._s(s.row.effect)+" ")]):"array_data"===a.id?t("span",e._l(s.row[a.id],(function(a,s){return t("p",{key:s,staticClass:"mb-0"},[e._v(e._s(a))])})),0):RegExp(/\n/).test(s.row[s.column.property])?t("span",{staticStyle:{"white-space":"pre-wrap"}},[e._v(" "+e._s(s.row[a.id])+" ")]):t("span",[e._v(e._s(s.row[a.id]))])]}}],null,!0)})})),e._t("custom-edit-select"),e._t("custom-switch"),e._t("custom-function"),e._t("slot-sheet-open")],2)],1)},r=[],o={name:"table-component",props:["data","tableColumns"],data(){return{api:this.apiUrl,loading:!0}},methods:{selectChangeHandler(e){this.$emit("selectionChange",e)},downloadPdf(e){const t=e.file_Id;this.$emit("downloadPdfHandler",t),this.$emit("downloadPdfHandler2",e)},getRowKeys(e){return e.index?e.index:e.id},rowStyleHandler(e){if("1"===e.row.isWeekend||"1"===e.row.isNight)return"fontColorBlue"}},mounted(){this.data&&(this.loading=!1)}},n=o,l=a(1001),c=(0,l.Z)(n,s,r,!1,null,"4a0f1604",null),i=c.exports},8126:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var s=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:this.$root.overlay,expression:"this.$root.overlay",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"wrapper"},[t("h2",{staticClass:"form-title mb-4"},[e._v("次區域與當站簽核異動")]),t("el-tabs",{attrs:{type:"border-card"}},[t("el-tab-pane",{attrs:{label:"更換無塵室區長"}},[t("el-form",{ref:"facMasterForm",attrs:{model:e.facMasterForm}},[t("el-form-item",{staticClass:"mb-2",attrs:{label:"原簽核工號",prop:"OldEmp_No"}},[t("el-select",{ref:"facMasterRemote",attrs:{filterable:"",remote:"","reserve-keyword":"",clearable:"",placeholder:"輸入關鍵字"},on:{"visible-change":e.facMasterClearSearch},nativeOn:{keyup:function(t){return e.facMasterSearchHandler(t)}},model:{value:e.facMasterForm.OldEmp_No,callback:function(t){e.$set(e.facMasterForm,"OldEmp_No",t)},expression:"facMasterForm.OldEmp_No"}},e._l(e.empOption,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name+"("+e.emp_no+")",value:e.emp_no}})})),1),t("p",{staticClass:"note mb-0 mt-1"},[e._v(e._s(e.$store.state.remoteSearchNote))])],1),e.facMasterForm.OldEmp_No.length?t("el-button",{staticClass:"mb-3",attrs:{size:"small",type:"primary"},on:{click:function(t){return e.searchFacMaster()}}},[e._v("查詢")]):e._e(),e.facMasterSelected.length?t("div",{staticClass:"selected-box mt-1"},[t("span",{staticClass:"me-2"},[e._v("已選 "+e._s(e.facMasterSelected.length)+" 項")]),t("el-form-item",{staticClass:"mb-2",attrs:{label:"新簽核工號",prop:"NewEmp_No"}},[t("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",clearable:"",placeholder:"輸入關鍵字"},on:{"visible-change":e.newEmpFacMasterClearSearch},nativeOn:{keyup:function(t){return e.newEmpFacMasterSearchHandler(t)}},model:{value:e.facMasterForm.NewEmp_No,callback:function(t){e.$set(e.facMasterForm,"NewEmp_No",t)},expression:"facMasterForm.NewEmp_No"}},e._l(e.newEmpOption,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name+"("+e.emp_no+")",value:e.emp_no}})})),1),t("p",{staticClass:"note mb-0 mt-1"},[e._v(e._s(e.$store.state.remoteSearchNote))])],1),e.facMasterForm.NewEmp_No.length?t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.updFacMaster()}}},[e._v("更換")]):e._e()],1):e._e()],1),t("TableComponent",{ref:"facMasterTable",staticClass:"mt-3",attrs:{data:e.facMasterTableList,tableColumns:e.facMasterTableColumns},on:{selectionChange:e.facMasterSelection},scopedSlots:e._u([{key:"custom-selection",fn:function(){return[t("el-table-column",{attrs:{type:"selection",width:"80","reserve-selection":!0}})]},proxy:!0}])}),t("el-pagination",{attrs:{layout:"total, prev, pager, next, jumper",total:e.facMasterTableData.length,"current-page":e.facMasterPage},on:{"current-change":e.facMasterChangePage}})],1),t("el-tab-pane",{attrs:{label:"更換非無塵室區長"}},[t("el-form",{ref:"notFacMasterForm",attrs:{model:e.notFacMasterForm}},[t("el-form-item",{staticClass:"mb-2",attrs:{label:"原簽核工號",prop:"OldEmp_No"}},[t("el-select",{attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":"",placeholder:"輸入關鍵字"},on:{"visible-change":e.notFacMasterClearSearch},nativeOn:{keyup:function(t){return e.notFacMasterSearchHandler(t)}},model:{value:e.notFacMasterForm.OldEmp_No,callback:function(t){e.$set(e.notFacMasterForm,"OldEmp_No",t)},expression:"notFacMasterForm.OldEmp_No"}},e._l(e.notEmpOption,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name+"("+e.emp_no+")",value:e.emp_no}})})),1),t("p",{staticClass:"note mb-0 mt-1"},[e._v(e._s(e.$store.state.remoteSearchNote))])],1),e.notFacMasterForm.OldEmp_No.length?t("el-button",{staticClass:"mb-3",attrs:{size:"small",type:"primary"},on:{click:function(t){return e.searchNotFacMaster()}}},[e._v("查詢")]):e._e(),e.notFacMasterSelected.length?t("div",{staticClass:"selected-box mt-1"},[t("span",{staticClass:"me-2"},[e._v("已選 "+e._s(e.notFacMasterSelected.length)+" 項")]),t("el-form-item",{staticClass:"mb-2",attrs:{label:"新簽核工號",prop:"NewEmp_No"}},[t("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",clearable:"",placeholder:"輸入關鍵字"},on:{"visible-change":e.newEmpNotFacMasterClearSearch},nativeOn:{keyup:function(t){return e.newEmpNotFacMasterSearchHandler(t)}},model:{value:e.notFacMasterForm.NewEmp_No,callback:function(t){e.$set(e.notFacMasterForm,"NewEmp_No",t)},expression:"notFacMasterForm.NewEmp_No"}},e._l(e.notNewEmpOption,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name+"("+e.emp_no+")",value:e.emp_no}})})),1),t("p",{staticClass:"note mb-0 mt-1"},[e._v(e._s(e.$store.state.remoteSearchNote))])],1),e.notFacMasterForm.NewEmp_No.length?t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.updNotFacMaster()}}},[e._v("更換")]):e._e()],1):e._e()],1),t("TableComponent",{ref:"notFacMasterTable",staticClass:"mt-3",attrs:{data:e.notFacMasterTableList,tableColumns:e.notFacMasterTableColumns},on:{selectionChange:e.notFacMasterSelection},scopedSlots:e._u([{key:"custom-selection",fn:function(){return[t("el-table-column",{attrs:{type:"selection",width:"80","reserve-selection":!0}})]},proxy:!0}])}),t("el-pagination",{attrs:{layout:"total, prev, pager, next, jumper",total:e.notFacMasterTableData.length,"current-page":e.notFacMasterRoomPage},on:{"current-change":e.notFacMasterRoomChangePage}})],1),t("el-tab-pane",{attrs:{label:"更換次區域簽核者"}},[t("el-form",{ref:"secondAreaSignOffForm",attrs:{model:e.secondAreaSignOffForm}},[t("el-form-item",{staticClass:"mb-2",attrs:{label:"原簽核工號",prop:"OldEmp_No"}},[t("el-select",{attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":"",placeholder:"輸入關鍵字"},on:{"visible-change":e.secondAreaSignOffClearSearch},nativeOn:{keyup:function(t){return e.secondAreaSignOffSearchHandler(t)}},model:{value:e.secondAreaSignOffForm.OldEmp_No,callback:function(t){e.$set(e.secondAreaSignOffForm,"OldEmp_No",t)},expression:"secondAreaSignOffForm.OldEmp_No"}},e._l(e.secondAreaSignOffOption,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name+"("+e.emp_no+")",value:e.emp_no}})})),1),t("p",{staticClass:"note mb-0 mt-1"},[e._v(e._s(e.$store.state.remoteSearchNote))])],1),e.secondAreaSignOffForm.OldEmp_No.length?t("el-button",{staticClass:"mb-3",attrs:{size:"small",type:"primary"},on:{click:function(t){return e.searchSecondAreaSignOff()}}},[e._v("查詢")]):e._e(),e.secondAreaSignOffSelected.length?t("div",{staticClass:"selected-box mt-1"},[t("span",{staticClass:"me-2"},[e._v("已選 "+e._s(e.secondAreaSignOffSelected.length)+" 項")]),t("el-form-item",{staticClass:"mb-2",attrs:{label:"新簽核工號",prop:"NewEmp_No"}},[t("el-select",{attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":"",placeholder:"輸入關鍵字"},on:{"visible-change":e.newEmpSecondAreaSignOffClearSearch},nativeOn:{keyup:function(t){return e.newEmpSecondAreaSignOffSearchHandler(t)}},model:{value:e.secondAreaSignOffForm.NewEmp_No,callback:function(t){e.$set(e.secondAreaSignOffForm,"NewEmp_No",t)},expression:"secondAreaSignOffForm.NewEmp_No"}},e._l(e.newSecondAreaSignOff,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name+"("+e.emp_no+")",value:e.emp_no}})})),1),t("p",{staticClass:"note mb-0 mt-1"},[e._v(e._s(e.$store.state.remoteSearchNote))])],1),e.secondAreaSignOffForm.NewEmp_No.length?t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.updSecondAreaSignOff()}}},[e._v("更換")]):e._e()],1):e._e()],1),t("TableComponent",{ref:"subAreaSignerTable",staticClass:"mt-3",attrs:{data:e.secondAreaSignOffTableList,tableColumns:e.subAreaSignOffTableColumns},on:{selectionChange:e.subAreaSignOffSelection},scopedSlots:e._u([{key:"custom-selection",fn:function(){return[t("el-table-column",{attrs:{type:"selection",width:"80","reserve-selection":!0}})]},proxy:!0}])}),t("el-pagination",{attrs:{layout:"total, prev, pager, next, jumper",total:e.secondAreaSignOffTableData.length,"current-page":e.secondAreaSignOffPage},on:{"current-change":e.secondAreaSignOffChangePage}})],1),t("el-tab-pane",{attrs:{label:"更換當站簽核者"}},[t("el-form",{ref:"processorForm",attrs:{model:e.processorForm}},[t("el-form-item",{staticClass:"mb-2",attrs:{label:"原簽核工號",prop:"OldEmp_No"}},[t("el-select",{attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":"",placeholder:"輸入關鍵字"},on:{"visible-change":e.processorClearSearch},nativeOn:{keyup:function(t){return e.processorSearchHandler(t)}},model:{value:e.processorForm.OldEmp_No,callback:function(t){e.$set(e.processorForm,"OldEmp_No",t)},expression:"processorForm.OldEmp_No"}},e._l(e.processorOption,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name+"("+e.emp_no+")",value:e.emp_no}})})),1),t("p",{staticClass:"note mb-0 mt-1"},[e._v(e._s(e.$store.state.remoteSearchNote))])],1),e.processorForm.OldEmp_No.length?t("el-button",{staticClass:"mb-3",attrs:{size:"small",type:"primary"},on:{click:function(t){return e.searchProcessor()}}},[e._v("查詢")]):e._e(),e.processorSelected.length?t("div",{staticClass:"selected-box mt-1"},[t("span",{staticClass:"me-2"},[e._v("已選 "+e._s(e.processorSelected.length)+" 項")]),t("el-form-item",{staticClass:"mb-2",attrs:{label:"新簽核工號",prop:"NewEmp_No"}},[t("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",clearable:"",placeholder:"輸入關鍵字"},on:{"visible-change":e.newEmpProcessorClearSearch},nativeOn:{keyup:function(t){return e.newEmpProcessorSearchHandler(t)}},model:{value:e.processorForm.NewEmp_No,callback:function(t){e.$set(e.processorForm,"NewEmp_No",t)},expression:"processorForm.NewEmp_No"}},e._l(e.newProcessor,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name+"("+e.emp_no+")",value:e.emp_no}})})),1),t("p",{staticClass:"note mb-0 mt-1"},[e._v(e._s(e.$store.state.remoteSearchNote))])],1),e.processorForm.NewEmp_No.length?t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.updProcessor()}}},[e._v("更換")]):e._e()],1):e._e()],1),t("TableComponent",{ref:"processorTable",staticClass:"mt-3",attrs:{data:e.processorTableList,tableColumns:e.processorTableColumns},on:{selectionChange:e.processorSelection},scopedSlots:e._u([{key:"custom-selection",fn:function(){return[t("el-table-column",{attrs:{type:"selection",width:"80","reserve-selection":!0}})]},proxy:!0}])}),t("el-pagination",{attrs:{layout:"total, prev, pager, next, jumper",total:e.processorTableData.length,"current-page":e.processorPage},on:{"current-change":e.processorChangePage}})],1)],1)],1)},r=[],o=a(1919),n={name:"subAreaInQueueSignoffComponent",components:{TableComponent:o.Z},data(){return{empOption:[],newEmpOption:[],facMasterForm:{OldEmp_No:[],NewEmp_No:[]},facMasterTableColumns:[{id:"index",label:"項次",width:"70"},{id:"factoryCode",label:"廠區代號(備註)",width:"160"},{id:"mainArea",label:"主區域",width:"160"},{id:"floor",label:"FAB廠別",width:"125"},{id:"aid",label:"FAB ID",width:"100"},{id:"factoryDirector",label:"廠長(負責人)",width:"200"},{id:"modifyDate",label:"最近更改人日期"}],facMasterSelected:[],facMasterTableData:[],facMasterTableList:[],facMasterPage:1,notFacMasterForm:{OldEmp_No:[],NewEmp_No:[]},notFacMasterTableColumns:[{id:"index",label:"項次",width:"70"},{id:"factoryCode",label:"廠區代號(備註)",width:"160"},{id:"mainArea",label:"主區域",width:"160"},{id:"floor",label:"FAB廠別",width:"125"},{id:"aid",label:"FAB ID",width:"100"},{id:"factoryDirector",label:"廠長(負責人)",width:"200"},{id:"modifyDate",label:"最近更改人日期"}],notEmpOption:[],notNewEmpOption:[],notFacMasterSelected:[],notFacMasterTableData:[],notFacMasterTableList:[],notFacMasterRoomPage:1,secondAreaSignOffForm:{OldEmp_No:[],NewEmp_No:[]},secondAreaSignOffOption:[],subAreaSignOffTableColumns:[{id:"index",label:"項次",width:"70"},{id:"factoryInfo",label:"廠區代號(備註)",width:"160"},{id:"mainArea",label:"主區域(ID)",width:"140"},{id:"subArea",label:"次區域(ID)",width:"140"},{id:"typeInfo",label:"Type",width:"140"},{id:"empInfo",label:"廠長(負責人)",width:"300"},{id:"modifyInfo",label:"最近更改人日期",width:"175"}],newSecondAreaSignOff:[],secondAreaSignOffSelected:[],secondAreaSignOffTableData:[],secondAreaSignOffTableList:[],secondAreaSignOffPage:1,processorForm:{OldEmp_No:[],NewEmp_No:[]},processorOption:[],processorTableColumns:[{id:"index",label:"項次",width:"70"},{id:"proc_Name",label:"流程名稱",width:"150"},{id:"empInfo",label:"簽核人員",width:"180"},{id:"create_User",label:"申請人工號",width:"150"},{id:"rr_Id",label:"申請單號",width:"150"},{id:"act_desc",label:"簽核點",width:"150"},{id:"create_Date",label:"申請日期"}],processorSelected:[],newProcessor:[],processorTableData:[],processorTableList:[],processorPage:1}},computed:{},methods:{async facMasterSearchHandler(e){try{const t=e.code,a=e.target.value;if("Enter"===t||"NumpadEnter"===t){const e=await this.$store.dispatch("getWorkerList",a);this.empOption=e.data.data}}catch(t){console.log(t)}},facMasterClearSearch(e){e||(this.empOption=[])},async searchFacMaster(){try{const e={emp_no:this.facMasterForm.OldEmp_No,location_type:"1"},t=this.getURLNewParams(e),a=await this.$store.dispatch("OSHQryFacMaster",t);let s=a.data.data;this.facMasterTableData=JSON.parse(JSON.stringify(s)),this.facMasterTableData=this.facMasterListColumns(this.facMasterTableData),this.facMasterTableList=this.facMasterTableData.slice(0,10),this.facMasterPage=1,this.$refs.facMasterTable.$refs.multipleTable.clearSelection()}catch(e){console.log(e)}},async newEmpFacMasterSearchHandler(e){try{const t=e.code,a=e.target.value;if("Enter"===t||"NumpadEnter"===t){const e=await this.$store.dispatch("getWorkerList",a);this.newEmpOption=e.data.data}}catch(t){console.log(t)}},newEmpFacMasterClearSearch(e){e||(this.newEmpOption=[])},facMasterSelection(e){this.facMasterSelected=e},async updFacMaster(){try{const e=this.facMasterSelected.map((e=>e.aid)),t={NewEmp_No:this.facMasterForm.NewEmp_No,AIds:e,OldEmp_No:this.facMasterForm.OldEmp_No,Location_Type:"1"},a=await this.$store.dispatch("OSHUpdFacMaster",t);a.data.isOK&&(this.$message({type:"success",duration:5e3,showClose:!0,message:"更換無塵室區長成功"}),this.searchFacMaster(),this.$refs.facMasterTable.$refs.multipleTable.clearSelection(),this.facMasterPage=1)}catch(e){console.log(e)}},facMasterChangePage(e){this.facMasterPage=e;const t=10*(e-1),a=10*e;this.facMasterTableList=this.facMasterTableData.slice(t,a)},facMasterListColumns(e){return e.forEach(((e,t)=>{e.index=t+1,e.factoryCode=`${e.ld2}(${e.ld2E})`,e.mainArea=`${e.ld4}(${e.ld4})`,e.factoryDirector=`${e.emp_Name}(${e.sponsor},${e.emp_Email})(${e.emp_Dept_Full_Name}, ext=${e.emp_Extension_No})`,e.modifyDate=`${e.modify_User}(${e.modify_Date})`})),e},async notFacMasterSearchHandler(e){try{const t=e.code,a=e.target.value;if("Enter"===t||"NumpadEnter"===t){const e=await this.$store.dispatch("getWorkerList",a);this.notEmpOption=e.data.data}}catch(t){console.log(t)}},notFacMasterClearSearch(e){e||(this.notEmpOption=[])},async searchNotFacMaster(){try{const e={emp_no:this.notFacMasterForm.OldEmp_No,location_type:"0"},t=this.getURLNewParams(e),a=await this.$store.dispatch("OSHQryFacMaster",t);let s=a.data.data;this.notFacMasterTableData=JSON.parse(JSON.stringify(s)),this.notFacMasterTableData=this.notFacMasterListColumns(this.notFacMasterTableData),this.notFacMasterTableList=this.notFacMasterTableData.slice(0,10),this.notFacMasterRoomPage=1,this.$refs.notFacMasterTable.$refs.multipleTable.clearSelection()}catch(e){console.log(e)}},async newEmpNotFacMasterSearchHandler(e){try{const t=e.code,a=e.target.value;if("Enter"===t||"NumpadEnter"===t){const e=await this.$store.dispatch("getWorkerList",a);this.notNewEmpOption=e.data.data}}catch(t){console.log(t)}},newEmpNotFacMasterClearSearch(e){e||(this.notNewEmpOption=[])},notFacMasterSelection(e){this.notFacMasterSelected=e},async updNotFacMaster(){try{const e=this.notFacMasterSelected.map((e=>e.aid)),t={NewEmp_No:this.notFacMasterForm.NewEmp_No,AIds:e,OldEmp_No:this.notFacMasterForm.OldEmp_No,Location_Type:"0"},a=await this.$store.dispatch("OSHUpdFacMaster",t);a.data.isOK&&(this.$message({type:"success",duration:5e3,showClose:!0,message:"更換非無塵室區長成功"}),this.searchNotFacMaster(),this.$refs.notFacMasterTable.$refs.multipleTable.clearSelection(),this.notFacMasterRoomPage=1)}catch(e){console.log(e)}},notFacMasterRoomChangePage(e){this.notFacMasterRoomPage=e;const t=10*(e-1),a=10*e;this.notFacMasterTableList=this.notFacMasterTableData.slice(t,a)},notFacMasterListColumns(e){return e.forEach(((e,t)=>{e.index=t+1,e.factoryCode=`${e.ld2}(${e.ld2E})`,e.mainArea=`${e.ld4}(${e.ld4})`,e.factoryDirector=`${e.emp_Name}(${e.sponsor},${e.emp_Email})(${e.emp_Dept_Full_Name}, ext=${e.emp_Extension_No})`,e.modifyDate=`${e.modify_User}(${e.modify_Date})`})),e},async secondAreaSignOffSearchHandler(e){try{const t=e.code,a=e.target.value;if("Enter"===t||"NumpadEnter"===t){const e=await this.$store.dispatch("getWorkerList",a);this.secondAreaSignOffOption=e.data.data}}catch(t){console.log(t)}},secondAreaSignOffClearSearch(e){e||(this.secondAreaSignOffOption=[])},async searchSecondAreaSignOff(){try{const e={emp_no:this.secondAreaSignOffForm.OldEmp_No},t=this.getURLNewParams(e),a=await this.$store.dispatch("OSHQrySecondAreaSignOff",t);let s=a.data.data;this.secondAreaSignOffTableData=JSON.parse(JSON.stringify(s)),this.secondAreaSignOffTableData=this.secondAreaSignOffListColumns(this.secondAreaSignOffTableData),this.secondAreaSignOffTableList=this.secondAreaSignOffTableData.slice(0,10),this.secondAreaSignOffPage=1,this.$refs.subAreaSignerTable.$refs.multipleTable.clearSelection()}catch(e){console.log(e)}},subAreaSignOffSelection(e){this.secondAreaSignOffSelected=e},async newEmpSecondAreaSignOffSearchHandler(e){try{const t=e.code,a=e.target.value;if("Enter"===t||"NumpadEnter"===t){const e=await this.$store.dispatch("getWorkerList",a);this.newSecondAreaSignOff=e.data.data}}catch(t){console.log(t)}},newEmpSecondAreaSignOffClearSearch(e){e||(this.newSecondAreaSignOff=[])},async updSecondAreaSignOff(){try{const e=this.secondAreaSignOffSelected.map((e=>e.id)),t={NewEmp_No:this.secondAreaSignOffForm.NewEmp_No,Ids:e,OldEmp_No:this.secondAreaSignOffForm.OldEmp_No},a=await this.$store.dispatch("OSHUpdSecondAreaSignOff",t);a.data.isOK&&(this.$message({type:"success",duration:5e3,showClose:!0,message:"更換次區域簽核者成功"}),this.searchSecondAreaSignOff(),this.$refs.subAreaSignerTable.$refs.multipleTable.clearSelection(),this.secondAreaSignOffPage=1)}catch(e){console.log(e)}},secondAreaSignOffChangePage(e){this.secondAreaSignOffPage=e;const t=10*(e-1),a=10*e;this.secondAreaSignOffTableList=this.secondAreaSignOffTableData.slice(t,a)},secondAreaSignOffListColumns(e){return e.forEach(((e,t)=>{e.index=t+1,e.factoryInfo=`${e.ld2}(${e.ld1})`,e.mainArea=`${e.ld3}(${e.floor_Id})`,e.subArea=`${e.ld4}(${e.area_Id})`,e.typeInfo=`${e.member_Type}/${e.area_Type_Name}`,e.empInfo=`${e.emp_Name}(${e.emp_No}, ${e.e_Mail})(${e.dept_Name}, ext=${e.ext_No})`,e.modifyInfo=`${e.modify_User}(${e.modify_Date})`})),e},async processorSearchHandler(e){try{const t=e.code,a=e.target.value;if("Enter"===t||"NumpadEnter"===t){const e=await this.$store.dispatch("getWorkerList",a);this.processorOption=e.data.data}}catch(t){console.log(t)}},processorClearSearch(e){e||(this.processorOption=[])},async searchProcessor(){try{const e={emp_no:this.processorForm.OldEmp_No},t=this.getURLNewParams(e),a=await this.$store.dispatch("OSHQryProcessor",t),s=a.data.data;this.processorTableData=JSON.parse(JSON.stringify(s)),this.processorTableData=this.processorListColumns(this.processorTableData),this.processorTableList=this.processorTableData.slice(0,10),this.processorPage=1,this.$refs.processorTable.$refs.multipleTable.clearSelection()}catch(e){console.log(e)}},processorSelection(e){this.processorSelected=e},async newEmpProcessorSearchHandler(e){try{const t=e.code,a=e.target.value;if("Enter"===t||"NumpadEnter"===t){const e=await this.$store.dispatch("getWorkerList",a);this.newProcessor=e.data.data}}catch(t){console.log(t)}},newEmpProcessorClearSearch(e){e||(this.newProcessor=[])},async updProcessor(){try{const e=this.processorSelected.map((e=>e.rr_Id)),t={NewEmp_No:this.processorForm.NewEmp_No,rr_id:e,OldEmp_No:this.processorForm.OldEmp_No},a=await this.$store.dispatch("OSHUpdProcessor",t);a.data.isOK&&(this.$message({type:"success",duration:5e3,showClose:!0,message:"更換當站簽核者成功"}),this.searchProcessor(),this.$refs.processorTable.$refs.multipleTable.clearSelection(),this.processorPage=1)}catch(e){console.log(e)}},processorChangePage(e){this.processorPage=e;const t=10*(e-1),a=10*e;this.processorTableList=this.processorTableData.slice(t,a)},processorListColumns(e){return e.forEach(((e,t)=>{e.index=t+1,e.empInfo=`${e.processor_Empno}(${e.name})`})),e}},mounted(){this.$store.commit("HEADER_HANDLER",!0),this.$store.commit("BREADCRUMB_HANDLER",!0),this.$root.$children[0].sidebarSwitch=!0}},l=n,c=a(1001),i=(0,c.Z)(l,s,r,!1,null,null,null),p=i.exports}}]);
//# sourceMappingURL=8126.675b3b3990ccfc38.js.map