"use strict";(self["webpackChunkinnolux"]=self["webpackChunkinnolux"]||[]).push([[8772],{1919:function(t,e,a){a.d(e,{Z:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"table-responsive"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.data,"row-key":t.getRowKeys,"default-sort":{prop:"id",order:"ascending"},"empty-text":"查無資料","cell-class-name":t.rowStyleHandler,border:"","highlight-current-row":""},on:{"selection-change":t.selectChangeHandler}},[t._t("custom-selection"),t._t("custom-checkbox1"),t._t("custom-checkbox2"),t._l(t.tableColumns,(function(a,s){return e("el-table-column",{key:s,attrs:{prop:a.id,label:a.label,width:a.width,sortable:"date"===a.id},scopedSlots:t._u([{key:"default",fn:function(s){return["status"===a.id?e("el-tag",{attrs:{type:"簽核通過"===s.row.status||"審核通過"===s.row.status?"success":"拒絕申請"===s.row.status?"danger":"草稿"===s.row.status?"warning":"查無資料"}},[t._v(" "+t._s(s.row.status)+" ")]):"status_Id"===a.id?e("el-tag",{attrs:{type:"OPEN"===s.row.status_Id?"":"CLOSE"===s.row.status_Id?"danger":"FULL"===s.row.status_Id?"warning":"success"}},[t._v(" "+t._s(t.getCourseState(s.row.status_Id))+" ")]):"description2"===a.id?e("el-tag",{attrs:{type:"有效課程"===s.row.description?"":"danger"}},[t._v(" "+t._s(s.row.description)+" ")]):"approve_Status"===a.id?e("el-tag",{attrs:{type:"0"===s.row.approve_Status?"":"1"===s.row.approve_Status?"success":"danger"}},[t._v(" "+t._s(t.getApproveStatus(s.row.approve_Status))+" ")]):"approve_Status2"===a.id?e("el-tag",{attrs:{type:"審核中"===s.row.approve_Status2||"未審核"===s.row.approve_Status2?"":"審核完畢"===s.row.approve_Status2||"審核同意"===s.row.approve_Status2?"success":"danger"}},[t._v(" "+t._s(s.row.approve_Status2)+" ")]):"attend_Status"===a.id?e("el-tag",{attrs:{type:"0"===s.row.attend_Status?"":"1"===s.row.attend_Status?"success":"danger"}},[t._v(" "+t._s(t.getAttendStatus(s.row.attend_Status))+" ")]):"issue_Card"===a.id?e("el-tag",{attrs:{type:"0"===s.row.issue_Card?"":"1"===s.row.issue_Card?"success":"danger"}},[t._v(" "+t._s(t.getIssueCardStatus(s.row.issue_Card))+" ")]):"signUpStatus"===a.id?e("el-tag",{attrs:{type:"已結案"===t.signUpStatus(s.row.signUpStatus,s.row.approveStatus)?"success":"可取消報名"===t.signUpStatus(s.row.signUpStatus,s.row.approveStatus)?"danger":""}},[t._v(" "+t._s(t.signUpStatus(s.row.signUpStatus,s.row.approveStatus))+" ")]):"file_Name"===a.id||"d_File_Name"===a.id?e("a",{attrs:{href:"#"},on:{click:function(e){return t.downloadPdf(s.row)}}},[t._v(t._s(s.row[a.id]))]):"protocolInfo"===a.id?e("div",[e("div",[t._v(t._s(s.row.po_Name))]),t._l(s.row.files,(function(a){return e("div",[e("a",{attrs:{href:"#"},on:{click:function(e){return t.downloadPdf(a)}}},[t._v(t._s(a.file_Name))])])}))],2):"useable"===a.id&&"已刪除(廠商不可申請每日工單)"===s.row.useable?e("span",{staticStyle:{color:"red"}},[t._v(t._s(s.row.useable))]):"deleted"===a.id?e("span",{class:{"text-danger":"1"===s.row.deleted}},[t._v(" "+t._s(s.row.effect)+" ")]):"array_data"===a.id?e("span",t._l(s.row[a.id],(function(a,s){return e("p",{key:s,staticClass:"mb-0"},[t._v(t._s(a))])})),0):RegExp(/\n/).test(s.row[s.column.property])?e("span",{staticStyle:{"white-space":"pre-wrap"}},[t._v(" "+t._s(s.row[a.id])+" ")]):e("span",[t._v(t._s(s.row[a.id]))])]}}],null,!0)})})),t._t("custom-edit-select"),t._t("custom-switch"),t._t("custom-function"),t._t("slot-sheet-open")],2)],1)},r=[],o={name:"table-component",props:["data","tableColumns"],data(){return{api:this.apiUrl,loading:!0}},methods:{selectChangeHandler(t){this.$emit("selectionChange",t)},downloadPdf(t){const e=t.file_Id;this.$emit("downloadPdfHandler",e),this.$emit("downloadPdfHandler2",t)},getRowKeys(t){return t.index?t.index:t.id},rowStyleHandler(t){if("1"===t.row.isWeekend||"1"===t.row.isNight)return"fontColorBlue"}},mounted(){this.data&&(this.loading=!1)}},i=o,n=a(1001),l=(0,n.Z)(i,s,r,!1,null,"4a0f1604",null),d=l.exports},8772:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var s=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:this.$root.overlay,expression:"this.$root.overlay",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"wrapper"},[e("el-button",{staticClass:"goBack",attrs:{type:"text"},on:{click:function(e){return t.goBack()}}},[e("i",{staticClass:"el-icon-back me-1"}),t._v("回上頁 ")]),e("h2",{staticClass:"form-title"},[t._v("修改組織名冊")]),e("el-card",{staticClass:"mb-4",attrs:{shadow:"never"}},[e("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[e("div",{staticClass:"form-group mb-3"},[e("label",{attrs:{for:""}},[t._v("修改日期：")]),e("span",[t._v(t._s(t.getDay()))])]),e("el-form-item",{attrs:{label:"組織名稱",prop:"po_Name"}},[e("el-input",{attrs:{placeholder:"請輸入名稱"},model:{value:t.form.po_Name,callback:function(e){t.$set(t.form,"po_Name",e)},expression:"form.po_Name"}})],1),e("el-form-item",{attrs:{label:"負責人",prop:"MANAGER"}},[e("el-select",{attrs:{placeholder:"請輸入姓名或工號",clearable:"",filterable:"",remote:"",loading:t.loading,"loading-text":"載入中","no-data-text":"查無資料"},on:{change:t.managerChangeHandler,"visible-change":t.visibleHandleChange},nativeOn:{keyup:function(e){return t.remoteSelectManagerHandler(e)}},model:{value:t.form.MANAGER,callback:function(e){t.$set(t.form,"MANAGER",e)},expression:"form.MANAGER"}},t._l(t.areaQryEmp,(function(t,a){return e("el-option",{key:a,attrs:{label:t.name+"("+t.emp_no+")",value:t.emp_no}})})),1),e("p",{staticClass:"note mb-0 mt-1"},[t._v(t._s(t.$store.state.remoteSearchNote))])],1),e("el-form-item",{attrs:{label:"廠區",prop:"Location_Id"}},[e("el-checkbox-group",{model:{value:t.form.Location_Id,callback:function(e){t.$set(t.form,"Location_Id",e)},expression:"form.Location_Id"}},t._l(t.locations,(function(a,s){return e("el-checkbox",{key:s,attrs:{label:a.id}},[t._v(t._s(a.description))])})),1)],1)],1),e("div",{staticClass:"mt-4"},[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.submitForm("form")}}},[t._v("儲存")])],1)],1)],1)},r=[],o=(a(7658),a(1919)),i={name:"editProtocolOrgComponent",components:{TableComponent:o.Z},data(){return{form:{modify_Date:"",po_Name:"",MANAGER:"",location:[],Location_Id:""},loading:!1,rules:{po_Name:[{required:!0,message:"必填",trigger:"blur"}],MANAGER:[{required:!0,message:"必填",trigger:"change"}],Location_Id:[{required:!0,message:"必填",trigger:"change"}]},areaQryEmp:[],locations:[],selectedFac:[]}},computed:{},methods:{remoteSelectManagerHandler(t){if(this.loading=!0,"Enter"===t.code||"NumpadEnter"===t.code){if(this.loading=!1,!t.target.value)return;this.getAreaQryEmp(t.target.value)}},visibleHandleChange(t){t||(this.areaQryEmp=[])},managerChangeHandler(t){this.form.manager=t},goBack(){this.$router.go(-1)},searchHandler(t){if(this.loading=!0,"Enter"===t.code||"NumpadEnter"===t.code){if(this.loading=!1,!t.target.value)return;this.$store.dispatch("getMgrForChoice",t.target.value)}},submitForm(t){this.$refs[t].validate((async t=>{if(t)try{const t=await this.$store.dispatch("editProtocalOrg",this.form);t.data.isOK&&(this.$message({type:"success",duration:5e3,showClose:!0,message:"修改成功"}),this.$router.push({name:"protocolOrgManagement"}))}catch(e){console.log(e)}else this.$message({type:"error",duration:5e3,showClose:!0,message:"資料填寫錯誤"})}))},async qryFacAttendList(){const t=await this.$store.dispatch("qryFacAttendList"),e=t.data.data;this.locations=e.locations,this.selectedFac=e.selectedFac},async getAreaQryEmp(t){const e=await this.$store.dispatch("protocalAreaQryEmp",t),a=e.data.data;this.areaQryEmp=a}},async mounted(){const t=JSON.parse(this.$route.query.data);this.form={...this.form,...t},await this.qryFacAttendList(),this.form.Location_Id=this.selectedFac.find((e=>e.po_Id===t.po_id)).location,this.form.MANAGER=`${this.form.name}(${this.form.manager})`,this.$store.commit("HEADER_HANDLER",!0),this.$store.commit("BREADCRUMB_HANDLER",!0),this.$root.$children[0].sidebarSwitch=!0}},n=i,l=a(1001),d=(0,l.Z)(n,s,r,!1,null,null,null),c=d.exports}}]);
//# sourceMappingURL=8772.21478d5ac6d65030.js.map