"use strict";(self["webpackChunkinnolux"]=self["webpackChunkinnolux"]||[]).push([[3655],{4865:function(t,e,s){s.d(e,{Z:function(){return u}});var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{layout:"total, prev, pager, next, jumper",total:t.totalLength,"current-page":t.currentPage},on:{"current-change":t.changePage}})],1)},a=[],r={name:"pagination1-component",props:["totalLength"],computed:{currentPage(){return this.$store.state.currentPage}},methods:{changePage(t){this.$emit("changePageHandler",t)}},mounted(){}},n=r,l=s(1001),i=(0,l.Z)(n,o,a,!1,null,"86225bf4",null),u=i.exports},1919:function(t,e,s){s.d(e,{Z:function(){return u}});var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"table-responsive"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.data,"row-key":t.getRowKeys,"default-sort":{prop:"id",order:"ascending"},"empty-text":"查無資料","cell-class-name":t.rowStyleHandler,border:"","highlight-current-row":""},on:{"selection-change":t.selectChangeHandler}},[t._t("custom-selection"),t._t("custom-checkbox1"),t._t("custom-checkbox2"),t._l(t.tableColumns,(function(s,o){return e("el-table-column",{key:o,attrs:{prop:s.id,label:s.label,width:s.width,sortable:"date"===s.id},scopedSlots:t._u([{key:"default",fn:function(o){return["status"===s.id?e("el-tag",{attrs:{type:"簽核通過"===o.row.status||"審核通過"===o.row.status?"success":"拒絕申請"===o.row.status?"danger":"草稿"===o.row.status?"warning":"查無資料"}},[t._v(" "+t._s(o.row.status)+" ")]):"status_Id"===s.id?e("el-tag",{attrs:{type:"OPEN"===o.row.status_Id?"":"CLOSE"===o.row.status_Id?"danger":"FULL"===o.row.status_Id?"warning":"success"}},[t._v(" "+t._s(t.getCourseState(o.row.status_Id))+" ")]):"description2"===s.id?e("el-tag",{attrs:{type:"有效課程"===o.row.description?"":"danger"}},[t._v(" "+t._s(o.row.description)+" ")]):"approve_Status"===s.id?e("el-tag",{attrs:{type:"0"===o.row.approve_Status?"":"1"===o.row.approve_Status?"success":"danger"}},[t._v(" "+t._s(t.getApproveStatus(o.row.approve_Status))+" ")]):"approve_Status2"===s.id?e("el-tag",{attrs:{type:"審核中"===o.row.approve_Status2||"未審核"===o.row.approve_Status2?"":"審核完畢"===o.row.approve_Status2||"審核同意"===o.row.approve_Status2?"success":"danger"}},[t._v(" "+t._s(o.row.approve_Status2)+" ")]):"attend_Status"===s.id?e("el-tag",{attrs:{type:"0"===o.row.attend_Status?"":"1"===o.row.attend_Status?"success":"danger"}},[t._v(" "+t._s(t.getAttendStatus(o.row.attend_Status))+" ")]):"issue_Card"===s.id?e("el-tag",{attrs:{type:"0"===o.row.issue_Card?"":"1"===o.row.issue_Card?"success":"danger"}},[t._v(" "+t._s(t.getIssueCardStatus(o.row.issue_Card))+" ")]):"signUpStatus"===s.id?e("el-tag",{attrs:{type:"已結案"===t.signUpStatus(o.row.signUpStatus,o.row.approveStatus)?"success":"可取消報名"===t.signUpStatus(o.row.signUpStatus,o.row.approveStatus)?"danger":""}},[t._v(" "+t._s(t.signUpStatus(o.row.signUpStatus,o.row.approveStatus))+" ")]):"file_Name"===s.id||"d_File_Name"===s.id?e("a",{attrs:{href:"#"},on:{click:function(e){return t.downloadPdf(o.row)}}},[t._v(t._s(o.row[s.id]))]):"protocolInfo"===s.id?e("div",[e("div",[t._v(t._s(o.row.po_Name))]),t._l(o.row.files,(function(s){return e("div",[e("a",{attrs:{href:"#"},on:{click:function(e){return t.downloadPdf(s)}}},[t._v(t._s(s.file_Name))])])}))],2):"useable"===s.id&&"已刪除(廠商不可申請每日工單)"===o.row.useable?e("span",{staticStyle:{color:"red"}},[t._v(t._s(o.row.useable))]):"deleted"===s.id?e("span",{class:{"text-danger":"1"===o.row.deleted}},[t._v(" "+t._s(o.row.effect)+" ")]):"array_data"===s.id?e("span",t._l(o.row[s.id],(function(s,o){return e("p",{key:o,staticClass:"mb-0"},[t._v(t._s(s))])})),0):RegExp(/\n/).test(o.row[o.column.property])?e("span",{staticStyle:{"white-space":"pre-wrap"}},[t._v(" "+t._s(o.row[s.id])+" ")]):e("span",[t._v(t._s(o.row[s.id]))])]}}],null,!0)})})),t._t("custom-edit-select"),t._t("custom-switch"),t._t("custom-function"),t._t("slot-sheet-open")],2)],1)},a=[],r={name:"table-component",props:["data","tableColumns"],data(){return{api:this.apiUrl,loading:!0}},methods:{selectChangeHandler(t){this.$emit("selectionChange",t)},downloadPdf(t){const e=t.file_Id;this.$emit("downloadPdfHandler",e),this.$emit("downloadPdfHandler2",t)},getRowKeys(t){return t.index?t.index:t.id},rowStyleHandler(t){if("1"===t.row.isWeekend||"1"===t.row.isNight)return"fontColorBlue"}},mounted(){this.data&&(this.loading=!1)}},n=r,l=s(1001),i=(0,l.Z)(n,o,a,!1,null,"4a0f1604",null),u=i.exports},6900:function(t,e,s){s.r(e),s.d(e,{default:function(){return d}});var o=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:this.$root.overlay,expression:"this.$root.overlay",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"wrapper"},[e("h2",{staticClass:"form-title mb-4"},[t._v("非無塵室各區名稱及負責人管理")]),e("el-form",{ref:"nonDustlessForm",attrs:{model:t.nonDustlessForm}},[e("el-row",[e("el-col",{staticClass:"px-1",attrs:{span:6}},[e("el-form-item",{attrs:{label:"廠區",prop:"LD1"}},[e("el-select",{attrs:{placeholder:"請選擇"},model:{value:t.nonDustlessForm.LD1,callback:function(e){t.$set(t.nonDustlessForm,"LD1",e)},expression:"nonDustlessForm.LD1"}},[e("el-option",{key:"LD1",attrs:{label:"全部",value:"LD1"}},[t._v("全部")]),t._l(t.facList,(function(t){return e("el-option",{key:t.ld1,attrs:{label:t.ld2,value:t.ld1}})}))],2)],1)],1),e("el-col",{staticStyle:{padding:"30px"},attrs:{span:3}},[e("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(e){return t.qryNonDustless()}}},[t._v("查詢")])],1)],1),e("el-row",[e("el-col",{staticClass:"px-1",staticStyle:{"margin-right":"20px"},attrs:{span:6}},[e("el-form-item",{attrs:{label:"FAB 廠別",prop:"Floor"}},[e("el-input",{attrs:{placeholder:"請輸入 FAB 廠別名稱"},model:{value:t.nonDustlessForm.Floor,callback:function(e){t.$set(t.nonDustlessForm,"Floor",e)},expression:"nonDustlessForm.Floor"}})],1)],1),e("el-col",{staticClass:"px-1",attrs:{span:6}},[e("el-form-item",{attrs:{label:"廠長(負責人)",prop:"SPONSOR"}},[e("el-select",{attrs:{filterable:"",remote:"","reverse-keyword":"",placeholder:"請輸入員工工號",loading:t.workerLoading1},nativeOn:{keyup:function(e){return t.workerSearchHandler1(e)}},model:{value:t.nonDustlessForm.SPONSOR,callback:function(e){t.$set(t.nonDustlessForm,"SPONSOR",e)},expression:"nonDustlessForm.SPONSOR"}},t._l(t.workerList1,(function(t){return e("el-option",{key:t.emp_no,attrs:{label:t.name,value:t.emp_no}})})),1),e("p",{staticClass:"note mb-0 mt-1"},[t._v(t._s(t.$store.state.remoteSearchNote))])],1)],1)],1)],1),e("div",{staticClass:"px-1"},[e("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(e){return t.addNonDustless()}}},[t._v("新增區域")])],1),e("TableComponent",{staticClass:"mt-3",attrs:{data:t.nonDustlessList,tableColumns:t.nonDustlessTableColumns},scopedSlots:t._u([{key:"custom-function",fn:function(){return[e("el-table-column",{staticClass:"function-column",attrs:{prop:"function",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"刪除",placement:"top-start"}},[e("el-popconfirm",{attrs:{title:"確定要刪除嗎？","cancel-button-type":"plain"},on:{confirm:function(e){return t.delNonDustless(s.row)}}},[e("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e("i",{staticClass:"el-icon-delete"})])],1)],1),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"修改",placement:"top-start"}},[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.updHandler(s.row)}}},[e("i",{staticClass:"el-icon-edit-outline"})])],1)]}}])})]},proxy:!0}])}),e("Pagination1",{attrs:{totalLength:t.nonDustless.length},on:{changePageHandler:t.changePage}}),e("el-dialog",{staticStyle:{top:"10vmin"},attrs:{title:"修改非無塵室各區名稱及負責人",visible:t.editNonDustless,width:"30%"},on:{"update:visible":function(e){t.editNonDustless=e}}},[e("el-form",{ref:"editNonDustlessItem",attrs:{model:t.editNonDustlessItem}},[e("div",{staticClass:"form-group mb-1 p-1"},[e("label",{attrs:{for:""}},[t._v("廠區代號：")]),e("span",[t._v(t._s(t.editNonDustlessItem.locInfo))])]),e("div",{staticClass:"form-group mb-1 p-1"},[e("label",{attrs:{for:""}},[t._v("主區域：")]),e("span",[t._v(t._s(t.editNonDustlessItem.fabInfo))])]),e("el-form-item",{staticClass:"mb-1 p-1",attrs:{label:"FAB 廠別名稱",prop:"Floor"}},[e("el-input",{staticClass:"w-75",attrs:{placeholder:"請輸入次區域名稱"},model:{value:t.editNonDustlessItem.Floor,callback:function(e){t.$set(t.editNonDustlessItem,"Floor",e)},expression:"editNonDustlessItem.Floor"}})],1),e("el-form-item",{staticClass:"mb-1 p-1",attrs:{label:"廠長(負責人)",prop:"Emp_No"}},[e("el-select",{staticClass:"w-75",attrs:{filterable:"",remote:"","reverse-keyword":"",placeholder:"請輸入員工工號",loading:t.workerLoading2},nativeOn:{keyup:function(e){return t.workerSearchHandler2(e)}},model:{value:t.editNonDustlessItem.Emp_No,callback:function(e){t.$set(t.editNonDustlessItem,"Emp_No",e)},expression:"editNonDustlessItem.Emp_No"}},[e("el-option",{key:"",attrs:{label:"清空",value:""}},[t._v("清空")]),t._l(t.workerList2,(function(t){return e("el-option",{key:t.emp_no,attrs:{label:t.name,value:t.emp_no}})}))],2),e("p",{staticClass:"note mb-0 mt-1"},[t._v(t._s(t.$store.state.remoteSearchNote))])],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"small"},on:{click:function(e){t.editNonDustless=!1}}},[t._v("取消")]),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.updNonDustless()}}},[t._v("更新")])],1)],1)],1)},a=[],r=s(1919),n=s(4865),l={name:"nonDustlessRoom-component",components:{TableComponent:r.Z,Pagination1:n.Z},data(){return{nonDustlessForm:{LD1:"LD1",Floor:"",SPONSOR:""},workerLoading1:!1,workerList1:[],nonDustlessTableColumns:[{id:"index",label:"項次",width:"100"},{id:"locInfo",label:"廠區代號(備註)",width:"175"},{id:"location_Type_Description",label:"主區域",width:"125"},{id:"floor",label:"FAB廠別/Main Area",width:"225"},{id:"empInfo",label:"廠長(負責人)",width:""}],editNonDustless:!1,editNonDustlessItem:{locInfo:"",fabInfo:"",Fab_Approve_Id:"",Floor:"",Emp_No:""},workerLoading2:!1,workerList2:[]}},computed:{facList(){return this.$store.state.facList_all},workerList(){return this.$store.state.signoff_workerList},nonDustless(){return this.$store.state.room_all},nonDustlessList(){return this.$store.state.room_allList},fabList(){return this.$store.state.nonDustless_fabList}},methods:{async qryNonDustless(){try{await this.$store.dispatch("getAllRoomList",{location_type:"0",ld1:this.nonDustlessForm.LD1}),this.$store.commit("CURRENT_PAGE_INIT")}catch(t){console.log(t)}},async workerSearchHandler1(t){if(this.workerLoading1=!0,"Enter"==t.key){if(this.workerLoading1=!1,!t.target.value)return;this.$store.dispatch("getWorkerList",t.target.value),this.workerList1=this.workerList}},async addNonDustless(){if(this.nonDustlessForm.Floor&&this.nonDustlessForm.SPONSOR)try{await this.$store.dispatch("addNonDustless",this.nonDustlessForm),this.$message({type:"success",duration:5e3,showClose:!0,message:"新增成功"}),this.qryNonDustless()}catch(t){console.log(t)}else this.$message({type:"error",showClose:!0,message:"請輸入 FAB 廠別及負責人"})},async delNonDustless(t){try{await this.$store.dispatch("delSingleRoom",t.fab_Approve_Id.toString()),this.qryNonDustless()}catch(e){console.log(e)}},async updHandler(t){this.editNonDustlessItem.locInfo=t.locInfo,this.editNonDustlessItem.fabInfo=`${t.location_Type_Description}(${t.location_Type})`,this.editNonDustlessItem.Floor=t.floor,this.editNonDustlessItem.Fab_Approve_Id=t.fab_Approve_Id,this.editNonDustlessItem.Emp_No=t.sponsor,await this.$store.dispatch("getNonDustlessFabList"),this.workerLoading2=[],this.editNonDustless=!0},async workerSearchHandler2(t){if(this.workerLoading2=!0,"Enter"==t.key){if(this.workerLoading2=!1,!t.target.value)return;this.$store.dispatch("getWorkerList",t.target.value),this.workerList2=this.workerList}},async updNonDustless(){try{await this.$store.dispatch("updNonDustless",this.editNonDustlessItem),this.$message({type:"success",duration:5e3,showClose:!0,message:"修改成功"}),this.editNonDustless=!1,this.qryNonDustless()}catch(t){console.log(t)}},changePage(t){this.$store.commit("CHANGE_PAGE_HANDLER",{page:t,paramsDataName:"room_all",paramsListName:"room_allList"})}},async mounted(){this.$store.commit("HEADER_HANDLER",!0),this.$store.commit("BREADCRUMB_HANDLER",!0),this.$root.$children[0].sidebarSwitch=!0;try{this.$store.state.room_all=[],this.$store.state.room_allList=[],await this.$store.dispatch("getAllFacList")}catch(t){console.log(t)}}},i=l,u=s(1001),c=(0,u.Z)(i,o,a,!1,null,null,null),d=c.exports}}]);
//# sourceMappingURL=3655.3a63c9f2e7561d8c.js.map