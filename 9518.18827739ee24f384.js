"use strict";(self["webpackChunkinnolux"]=self["webpackChunkinnolux"]||[]).push([[9518],{1919:function(e,t,a){a.d(t,{Z:function(){return n}});var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"table-responsive"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.data,"row-key":e.getRowKeys,"default-sort":{prop:"id",order:"ascending"},"empty-text":"查無資料","cell-class-name":e.rowStyleHandler,border:"","highlight-current-row":""},on:{"selection-change":e.selectChangeHandler}},[e._t("custom-selection"),e._t("custom-checkbox1"),e._t("custom-checkbox2"),e._l(e.tableColumns,(function(a,o){return t("el-table-column",{key:o,attrs:{prop:a.id,label:a.label,width:a.width,sortable:"date"===a.id},scopedSlots:e._u([{key:"default",fn:function(o){return["status"===a.id?t("el-tag",{attrs:{type:"簽核通過"===o.row.status||"審核通過"===o.row.status?"success":"拒絕申請"===o.row.status?"danger":"草稿"===o.row.status?"warning":"查無資料"}},[e._v(" "+e._s(o.row.status)+" ")]):"status_Id"===a.id?t("el-tag",{attrs:{type:"OPEN"===o.row.status_Id?"":"CLOSE"===o.row.status_Id?"danger":"FULL"===o.row.status_Id?"warning":"success"}},[e._v(" "+e._s(e.getCourseState(o.row.status_Id))+" ")]):"description2"===a.id?t("el-tag",{attrs:{type:"有效課程"===o.row.description?"":"danger"}},[e._v(" "+e._s(o.row.description)+" ")]):"approve_Status"===a.id?t("el-tag",{attrs:{type:"0"===o.row.approve_Status?"":"1"===o.row.approve_Status?"success":"danger"}},[e._v(" "+e._s(e.getApproveStatus(o.row.approve_Status))+" ")]):"approve_Status2"===a.id?t("el-tag",{attrs:{type:"審核中"===o.row.approve_Status2||"未審核"===o.row.approve_Status2?"":"審核完畢"===o.row.approve_Status2||"審核同意"===o.row.approve_Status2?"success":"danger"}},[e._v(" "+e._s(o.row.approve_Status2)+" ")]):"attend_Status"===a.id?t("el-tag",{attrs:{type:"0"===o.row.attend_Status?"":"1"===o.row.attend_Status?"success":"danger"}},[e._v(" "+e._s(e.getAttendStatus(o.row.attend_Status))+" ")]):"issue_Card"===a.id?t("el-tag",{attrs:{type:"0"===o.row.issue_Card?"":"1"===o.row.issue_Card?"success":"danger"}},[e._v(" "+e._s(e.getIssueCardStatus(o.row.issue_Card))+" ")]):"signUpStatus"===a.id?t("el-tag",{attrs:{type:"已結案"===e.signUpStatus(o.row.signUpStatus,o.row.approveStatus)?"success":"可取消報名"===e.signUpStatus(o.row.signUpStatus,o.row.approveStatus)?"danger":""}},[e._v(" "+e._s(e.signUpStatus(o.row.signUpStatus,o.row.approveStatus))+" ")]):"file_Name"===a.id||"d_File_Name"===a.id?t("a",{attrs:{href:"#"},on:{click:function(t){return e.downloadPdf(o.row)}}},[e._v(e._s(o.row[a.id]))]):"protocolInfo"===a.id?t("div",[t("div",[e._v(e._s(o.row.po_Name))]),e._l(o.row.files,(function(a){return t("div",[t("a",{attrs:{href:"#"},on:{click:function(t){return e.downloadPdf(a)}}},[e._v(e._s(a.file_Name))])])}))],2):"useable"===a.id&&"已刪除(廠商不可申請每日工單)"===o.row.useable?t("span",{staticStyle:{color:"red"}},[e._v(e._s(o.row.useable))]):"deleted"===a.id?t("span",{class:{"text-danger":"1"===o.row.deleted}},[e._v(" "+e._s(o.row.effect)+" ")]):"array_data"===a.id?t("span",e._l(o.row[a.id],(function(a,o){return t("p",{key:o,staticClass:"mb-0"},[e._v(e._s(a))])})),0):RegExp(/\n/).test(o.row[o.column.property])?t("span",{staticStyle:{"white-space":"pre-wrap"}},[e._v(" "+e._s(o.row[a.id])+" ")]):t("span",[e._v(e._s(o.row[a.id]))])]}}],null,!0)})})),e._t("custom-edit-select"),e._t("custom-switch"),e._t("custom-function"),e._t("slot-sheet-open")],2)],1)},s=[],r={name:"table-component",props:["data","tableColumns"],data(){return{api:this.apiUrl,loading:!0}},methods:{selectChangeHandler(e){this.$emit("selectionChange",e)},downloadPdf(e){const t=e.file_Id;this.$emit("downloadPdfHandler",t),this.$emit("downloadPdfHandler2",e)},getRowKeys(e){return e.index?e.index:e.id},rowStyleHandler(e){if("1"===e.row.isWeekend||"1"===e.row.isNight)return"fontColorBlue"}},mounted(){this.data&&(this.loading=!1)}},l=r,d=a(1001),i=(0,d.Z)(l,o,s,!1,null,"4a0f1604",null),n=i.exports},5272:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var o=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:this.$root.overlay,expression:"this.$root.overlay",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"wrapper"},[t("h2",{staticClass:"form-title mb-3"},[e._v("教室/課程/課表管理")]),t("el-tabs",{attrs:{type:"border-card"}},[t("el-tab-pane",{attrs:{label:"教室管理"}},[t("el-form",{ref:"addRoomForm",staticClass:"d-flex align-items-center",attrs:{inline:!0,model:e.addRoomForm,rules:e.addRoomRules}},[t("el-form-item",{staticClass:"p-1",attrs:{label:"教室編號",prop:"room_No"}},[t("el-input",{model:{value:e.addRoomForm.room_No,callback:function(t){e.$set(e.addRoomForm,"room_No",t)},expression:"addRoomForm.room_No"}})],1),t("el-form-item",{staticClass:"p-1",attrs:{label:"廠區代號+教室名稱",prop:"description"}},[t("el-input",{model:{value:e.addRoomForm.description,callback:function(t){e.$set(e.addRoomForm,"description",t)},expression:"addRoomForm.description"}})],1),t("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.submitAddRoom("addRoomForm")}}},[e._v("新增教室")])],1),t("TableComponent",{attrs:{data:e.classroomList,tableColumns:e.classroomTableColumns},scopedSlots:e._u([{key:"custom-function",fn:function(){return[t("el-table-column",{attrs:{prop:"function",label:"操作",fixed:"right",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"刪除",placement:"top-start"}},[t("el-popconfirm",{attrs:{title:"請問您確定要刪除此教室清單嗎？","cancel-button-type":"plain"},on:{confirm:function(t){return e.delRoom(a.row)}}},[t("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[t("i",{staticClass:"el-icon-delete"})])],1)],1),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"修改",placement:"top-start"}},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.openDialog(a.row)}}},[t("i",{staticClass:"el-icon-edit-outline"})])],1)]}}])})]},proxy:!0}])}),t("el-pagination",{attrs:{layout:"total, prev, pager, next, jumper",total:e.classroom.length,"current-page":e.classroomPage},on:{"current-change":e.classroomChangePage}})],1),t("el-tab-pane",{attrs:{label:"課程管理"}},[t("TableComponent",{attrs:{data:e.allCourseList,tableColumns:e.allCourseTableColumns}}),t("el-pagination",{attrs:{layout:"total, prev, pager, next, jumper",total:e.allCourse.length,"current-page":e.allCoursePage},on:{"current-change":e.allCourseChangePage}})],1),t("el-tab-pane",{attrs:{label:"課表管理"}},[t("div",{staticClass:"card rounded-1 my-2 p-3"},[t("el-form",{ref:"addScheduleForm",attrs:{model:e.addScheduleForm,rules:e.addScheduleRules}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"課程清單",prop:"course_No"}},[t("el-select",{attrs:{placeholder:"請選擇"},model:{value:e.addScheduleForm.course_No,callback:function(t){e.$set(e.addScheduleForm,"course_No",t)},expression:"addScheduleForm.course_No"}},e._l(e.allCourse,(function(e){return t("el-option",{key:e.course_No,attrs:{label:e.course_Name,value:e.course_No}})})),1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"課程說明",prop:"course_Description"}},[t("el-input",{attrs:{placeholder:"請輸入"},model:{value:e.addScheduleForm.course_Description,callback:function(t){e.$set(e.addScheduleForm,"course_Description",t)},expression:"addScheduleForm.course_Description"}})],1)],1)],1),t("el-row",[t("el-form-item",[t("el-checkbox",{staticClass:"ms-1 mb-1",attrs:{disabled:"SINGLE"!=e.addScheduleForm.repeat_Code},on:{change:e.randomPswdHandler},model:{value:e.addScheduleForm.special,callback:function(t){e.$set(e.addScheduleForm,"special",t)},expression:"addScheduleForm.special"}},[e._v("是否為專班")]),t("div",{staticClass:"ms-4 mb-2 text-success"},[e._v("專班開課只限單日開課,不開放每週開立")]),t("div",{staticClass:"ms-4 mb-1"},[e._v("此專班的報名密碼")]),t("el-input",{staticClass:"ms-4 w-25",attrs:{disabled:""},model:{value:e.addScheduleForm.password,callback:function(t){e.$set(e.addScheduleForm,"password",t)},expression:"addScheduleForm.password"}})],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"選擇廠商",prop:"vendor"}},[t("div",{staticClass:"mb-2 text-success"},[e._v("新增課程後會自動發送 mail 給指定廠商")]),t("div",{staticClass:"mt-2"},[t("el-select",{staticClass:"me-3",attrs:{placeholder:"請選擇",filterable:"",multiple:"",remote:"","reverse-keyword":"",disabled:!e.addScheduleForm.special,loading:e.vendorLoading},nativeOn:{keyup:function(t){return e.vendorSearchHandler(t)}},model:{value:e.addScheduleForm.vendor,callback:function(t){e.$set(e.addScheduleForm,"vendor",t)},expression:"addScheduleForm.vendor"}},e._l(e.vendorList,(function(e){return t("el-option",{key:e.s_id,attrs:{label:e.s_Name+" "+e.s_id,value:e.s_id}})})),1),t("p",{staticClass:"note mb-0 mt-1"},[e._v(e._s(e.$store.state.remoteSearchNote))])],1)])],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"教室地點",prop:"room_No"}},[t("el-select",{attrs:{placeholder:"請選擇"},model:{value:e.addScheduleForm.room_No,callback:function(t){e.$set(e.addScheduleForm,"room_No",t)},expression:"addScheduleForm.room_No"}},e._l(e.allClassroom,(function(e){return t("el-option",{key:e.room_No,attrs:{label:e.description,value:e.room_No}})})),1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"最大開課人數",prop:"min_Audience"}},[t("el-select",{attrs:{placeholder:"請選擇"},model:{value:e.addScheduleForm.min_Audience,callback:function(t){e.$set(e.addScheduleForm,"min_Audience",t)},expression:"addScheduleForm.min_Audience"}},e._l(e.maxStudent,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1)],1),t("el-form-item",{attrs:{label:"停止報名時間"}},[t("div",{staticClass:"d-flex align-items-center"},[t("el-form-item",{attrs:{prop:"stop_Date"}},[t("el-date-picker",{staticStyle:{width:"105%"},attrs:{type:"date","value-format":"yyyy/MM/dd",placeholder:"選擇日期"},model:{value:e.addScheduleForm.stop_Date,callback:function(t){e.$set(e.addScheduleForm,"stop_Date",t)},expression:"addScheduleForm.stop_Date"}})],1),t("el-form-item",{staticStyle:{"padding-left":"45px"},attrs:{prop:"stop_Time"}},[t("el-time-select",{staticStyle:{width:"105%"},attrs:{"picker-options":{start:"00:00",step:"00:30",end:"23:30"},placeholder:"選擇時間"},model:{value:e.addScheduleForm.stop_Time,callback:function(t){e.$set(e.addScheduleForm,"stop_Time",t)},expression:"addScheduleForm.stop_Time"}})],1)],1)]),t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{staticClass:"me-4",attrs:{label:"課程型態",prop:"repeat_Code"}},[t("el-select",{attrs:{placeholder:"請選擇"},on:{change:e.repeatCodeHandler},model:{value:e.addScheduleForm.repeat_Code,callback:function(t){e.$set(e.addScheduleForm,"repeat_Code",t)},expression:"addScheduleForm.repeat_Code"}},[t("el-option",{key:"WEEKLY",attrs:{label:"每週(WEEKLY)",value:"WEEKLY"}}),t("el-option",{key:"SINGLE",attrs:{label:"單日(SINGLE)",value:"SINGLE"}})],1)],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{staticClass:"me-4",attrs:{label:"每週上課時間",prop:"day_In_Week"}},[t("el-select",{attrs:{placeholder:"請選擇",disabled:"WEEKLY"!=e.addScheduleForm.repeat_Code},model:{value:e.addScheduleForm.day_In_Week,callback:function(t){e.$set(e.addScheduleForm,"day_In_Week",t)},expression:"addScheduleForm.day_In_Week"}},[t("el-option",{key:"1",attrs:{label:"每星期一",value:"1"}}),t("el-option",{key:"2",attrs:{label:"每星期二",value:"2"}}),t("el-option",{key:"3",attrs:{label:"每星期三",value:"3"}}),t("el-option",{key:"4",attrs:{label:"每星期四",value:"4"}}),t("el-option",{key:"5",attrs:{label:"每星期五",value:"5"}}),t("el-option",{key:"6",attrs:{label:"每星期六",value:"6"}}),t("el-option",{key:"7",attrs:{label:"每星期日",value:"7"}})],1)],1)],1)],1),t("el-form-item",{attrs:{label:"課表日期"}},[t("div",{staticClass:"d-flex align-items-center"},[t("el-form-item",{attrs:{prop:"available_begin_date"}},[t("el-date-picker",{staticStyle:{width:"105%"},attrs:{type:"date","value-format":"yyyy/MM/dd",placeholder:"選擇日期"},model:{value:e.addScheduleForm.available_begin_date,callback:function(t){e.$set(e.addScheduleForm,"available_begin_date",t)},expression:"addScheduleForm.available_begin_date"}})],1),t("span",{staticClass:"px-3"},[e._v("～")]),t("el-form-item",{attrs:{prop:"available_End_Date"}},[t("el-date-picker",{staticStyle:{width:"105%"},attrs:{type:"date","value-format":"yyyy/MM/dd",placeholder:"選擇日期",disabled:"WEEKLY"!=e.addScheduleForm.repeat_Code},model:{value:e.addScheduleForm.available_End_Date,callback:function(t){e.$set(e.addScheduleForm,"available_End_Date",t)},expression:"addScheduleForm.available_End_Date"}})],1)],1)]),t("el-form-item",{attrs:{label:"上課時間"}},[t("div",{staticClass:"d-flex align-items-center"},[t("el-form-item",{attrs:{prop:"begin_Time"}},[t("el-time-select",{staticStyle:{width:"105%"},attrs:{"picker-options":{start:"00:00",step:"00:30",end:"23:30"},placeholder:"選擇時間"},model:{value:e.addScheduleForm.begin_Time,callback:function(t){e.$set(e.addScheduleForm,"begin_Time",t)},expression:"addScheduleForm.begin_Time"}})],1),t("span",{staticClass:"px-3"},[e._v("～")]),t("el-form-item",{attrs:{prop:"end_Time"}},[t("el-time-select",{staticStyle:{width:"105%"},attrs:{"picker-options":{start:"00:00",step:"00:30",end:"23:30"},placeholder:"選擇時間"},model:{value:e.addScheduleForm.end_Time,callback:function(t){e.$set(e.addScheduleForm,"end_Time",t)},expression:"addScheduleForm.end_Time"}})],1)],1)]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitAddSchedule("addScheduleForm")}}},[e._v("新增課表")])],1)],1),t("h2",{staticClass:"form-title mt-4"},[e._v("審核狀態")]),t("div",{staticClass:"mb-2",staticStyle:{"font-size":"16px"}},[e._v("只秀出目前未到期及系統日前15天的課程備查")]),t("TableComponent",{staticClass:"w-100",attrs:{data:e.courseList,tableColumns:e.courseTableColumns},scopedSlots:e._u([{key:"custom-function",fn:function(){return[t("el-table-column",{attrs:{prop:"function",label:"課表資料",fixed:"right",width:"125"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"主頁修改",placement:"top-start"}},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.EditMain(a.row)}}},[t("i",{staticClass:"el-icon-edit-outline"})])],1),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"狀態修改",placement:"top-start"}},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.EditStatus(a.row)}}},[t("i",{staticClass:"el-icon-edit-outline"})])],1)]}}])})]},proxy:!0}])}),t("el-pagination",{attrs:{layout:"total, prev, pager, next, jumper",total:e.course.length,"current-page":e.coursePage},on:{"current-change":e.courseChangePage}})],1)],1),t("el-dialog",{attrs:{title:"教室編號/教室名稱修改",width:"40%",visible:e.updRoomDialog,"before-close":e.handleClose},on:{"update:visible":function(t){e.updRoomDialog=t}}},[t("el-form",{ref:"updRoomForm",attrs:{model:e.updRoomForm,rules:e.updRoomRules}},[t("el-form-item",{attrs:{label:"教室編號",prop:"room_No"}},[t("el-input",{model:{value:e.updRoomForm.room_No,callback:function(t){e.$set(e.updRoomForm,"room_No",t)},expression:"updRoomForm.room_No"}})],1),t("el-form-item",{attrs:{label:"廠區代號+教室名稱",prop:"description"}},[t("el-input",{model:{value:e.updRoomForm.description,callback:function(t){e.$set(e.updRoomForm,"description",t)},expression:"updRoomForm.description"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.closeDialog("updRoomForm")}}},[e._v("取消")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitUpdRoom("updRoomForm")}}},[e._v("更新")])],1)],1)],1)},s=[],r=a(1919),l={name:"courseInfoManagement-component",components:{TableComponent:r.Z},data(){return{classroomTableColumns:[{id:"index",label:"項次",width:"70"},{id:"room_No",label:"教室編號",width:""},{id:"description",label:"教室名稱",width:""}],addRoomForm:{room_No:"",description:"",max_Audience:0,deleted:"0",room_Id:""},addRoomRules:{room_No:[{required:!0,message:"必填",trigger:"blur"}],description:[{required:!0,message:"必填",trigger:"blur"}]},updRoomDialog:!1,updRoomForm:{room_No:"",description:"",max_Audience:0,deleted:"0",room_Id:""},updRoomRules:{room_No:[{required:!0,message:"必填",trigger:"blur"}],description:[{required:!0,message:"必填",trigger:"blur"}]},classroomPage:1,allCourseTableColumns:[{id:"index",label:"項次",width:"100"},{id:"course_No",label:"課程代號",width:"125"},{id:"course_Name",label:"課程名稱",width:"375"},{id:"min_Audience",label:"最小開課人數",width:"125"},{id:"description2",label:"狀態",width:""}],allCoursePage:1,addScheduleForm:{course_Id:"",course_No:"",course_Description:"",special:!1,special_Class:"",password:"",vendor:[],room_No:"",min_Audience:"",stop_Date:"",stop_Time:"",repeat_Code:"",day_In_Week:"0",available_begin_date:"",available_End_Date:"",begin_Time:"",end_Time:"",teacher_Emp_No:"",arrange_Emp_No:""},vendorLoading:!1,maxStudent:[15,20,30,35,40,50,60,70,80,100,120,140],addScheduleRules:{course_No:[{required:!0,message:"必填",trigger:"change"}],room_No:[{required:!0,message:"必填",trigger:"change"}],repeat_Code:[{required:!0,message:"必填",trigger:"change"}],day_In_Week:[{required:!0,message:"必填",trigger:"change"}],available_begin_date:[{required:!0,message:"必填",trigger:"change"}],available_End_Date:[{required:!0,message:"必填",trigger:"change"}],begin_Time:[{required:!0,message:"必填",trigger:"change"}],end_Time:[{required:!0,message:"必填",trigger:"change"}]},courseTableColumns:[{id:"index",label:"項次",width:"70"},{id:"courseInfo",label:"課表編號/ 課程名稱/ 課程說明 (課程代號)",width:"350"},{id:"courseType",label:"課程型態(上課時間)",width:"150"},{id:"courseRoom",label:"教室編號/最大開課人數(上限)",width:"300"},{id:"courseTime",label:"日期資訊",width:"180"}],coursePage:1}},computed:{classroom(){return this.$store.state.classroom},classroomList(){return this.$store.state.classroom_list},allCourse(){return this.$store.state.all_course},allCourseList(){return this.$store.state.all_courselist},allClassroom(){return this.$store.state.all_classroom},vendorList(){return this.$store.state.vendor_list},course(){return this.$store.state.course},courseList(){return this.$store.state.course_list}},methods:{submitAddRoom(e){this.$refs[e].validate((async t=>{if(t)try{const t=await this.$store.dispatch("addClassroom",this.addRoomForm);t.data.isOK&&(this.$message({type:"success",duration:5e3,showClose:!0,message:"新增成功"}),this.$refs[e].resetFields(),this.classroomPage=1)}catch(a){console.log(a)}else this.$message({type:"error",showClose:!0,message:"資料填寫錯誤"})}))},async delRoom(e){try{const t=await this.$store.dispatch("delClassroom",[e]);t.data.isOK&&(this.$message({type:"success",duration:5e3,showClose:!0,message:"刪除成功"}),this.classroomPage=1)}catch(t){console.log(t)}},openDialog(e){this.updRoomDialog=!0;let t={...e};this.updRoomForm=t},handleClose(e){this.$confirm("確定關閉？").then((()=>{this.closeDialog("dialogForm"),e()})).catch((()=>{}))},closeDialog(e){this.updRoomDialog=!1,this.updRoomForm={},this.$refs[e].clearValidate()},submitUpdRoom(e){this.$refs[e].validate((async t=>{if(t)try{const t=await this.$store.dispatch("updClassroom",this.updRoomForm);t.data.isOK&&(this.$message({type:"success",duration:5e3,showClose:!0,message:"修改成功"}),this.closeDialog(e),this.classroomPage=1)}catch(a){console.log(a)}else this.$message({type:"error",showClose:!0,message:"資料填寫錯誤"})}))},classroomChangePage(e){this.classroomPage=e,this.$store.commit("CHANGE_PAGE_HANDLER",{page:e,paramsDataName:"classroom",paramsListName:"classroom_list"})},allCourseChangePage(e){this.allCoursePage=e,this.$store.commit("CHANGE_PAGE_HANDLER",{page:e,paramsDataName:"all_course",paramsListName:"all_courselist"})},randomPswdHandler(e){this.addScheduleForm.password=e?Math.floor(9e3*Math.random())+1e3:""},vendorSearchHandler(e){if(this.vendorLoading=!0,"Enter"===e.code||"NumpadEnter"===e.code){if(this.vendorLoading=!1,!e.target.value)return;this.$store.dispatch("getVendorList",e.target.value)}},repeatCodeHandler(e){"SINGLE"==e?(this.addScheduleForm.day_In_Week="0",this.addScheduleRules.day_In_Week=[],this.$refs.addScheduleForm.clearValidate("day_In_Week"),this.addScheduleForm.available_End_Date="",this.addScheduleRules.available_End_Date=[],this.$refs.addScheduleForm.clearValidate("available_End_Date")):(this.addScheduleForm.special_Class="",this.addScheduleForm.password="",this.addScheduleForm.vendor=[],this.addScheduleForm.day_In_Week="",this.addScheduleRules.day_In_Week=[{required:!0,message:"必填",trigger:"change"}],this.addScheduleRules.available_End_Date=[{required:!0,message:"必填",trigger:"change"}])},submitAddSchedule(e){"WEEKLY"==this.addScheduleForm.repeat_Code&&this.addScheduleForm.available_begin_date>this.addScheduleForm.available_End_Date?this.$message({type:"error",showClose:!0,message:"上課日期有誤，請調整"}):this.addScheduleForm.begin_Time>=this.addScheduleForm.end_Time?this.$message({type:"error",showClose:!0,message:"上課時間有誤，請調整"}):this.$refs[e].validate((async t=>{if(t){this.addScheduleForm.course_Id=this.allCourse.filter((e=>e.course_No==this.addScheduleForm.course_No))[0].course_Id,this.addScheduleForm.special_Class=this.addScheduleForm.special?"Y":"",this.addScheduleForm.available_End_Date||(this.addScheduleForm.available_End_Date=this.addScheduleForm.available_begin_date);try{const t=await this.$store.dispatch("addSchedule",this.addScheduleForm);t.data.isOK&&(this.$message({type:"success",duration:5e3,showClose:!0,message:"新增成功"}),this.$refs[e].resetFields(),this.coursePage=1)}catch(a){console.log(a)}}else this.$message({type:"error",showClose:!0,message:"資料填寫錯誤"})}))},courseChangePage(e){this.coursePage=e,this.$store.commit("CHANGE_PAGE_HANDLER",{page:e,paramsDataName:"course",paramsListName:"course_list"})},EditMain(e){const{href:t}=this.$router.resolve({path:"/scheduleMainEdit",query:{data:JSON.stringify(e)}});window.open(t,"_self")},EditStatus(e){const{href:t}=this.$router.resolve({path:"/scheduleStatusEdit",query:{data:JSON.stringify(e)}});window.open(t,"_self")}},async mounted(){this.$store.commit("HEADER_HANDLER",!0),this.$store.commit("BREADCRUMB_HANDLER",!0),this.$root.$children[0].sidebarSwitch=!0;try{await this.$store.dispatch("getClassroom"),await this.$store.dispatch("getCourse"),await this.$store.dispatch("forSchedule")}catch(e){console.log(e)}}},d=l,i=a(1001),n=(0,i.Z)(d,o,s,!1,null,null,null),c=n.exports}}]);
//# sourceMappingURL=9518.18827739ee24f384.js.map