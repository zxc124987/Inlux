{"version":3,"file":"4569.e1944e42b2db04a5.js","mappings":"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","sources":["webpack://innolux/./src/views/engineeringManagement/engineeringDataManagementEdit/engineeringDataManagementEdit.html","webpack://innolux/src/views/engineeringManagement/engineeringDataManagementEdit/engineeringDataManagementEdit.vue","webpack://innolux/./src/views/engineeringManagement/engineeringDataManagementEdit/engineeringDataManagementEdit.vue?907c","webpack://innolux/./src/views/engineeringManagement/engineeringDataManagementEdit/engineeringDataManagementEdit.vue"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading.fullscreen.lock\",value:(this.$root.overlay),expression:\"this.$root.overlay\",modifiers:{\"fullscreen\":true,\"lock\":true}}]},[_c('div',{staticClass:\"wrapper form-container\"},[_c('el-button',{staticClass:\"goBack\",attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.goBack()}}},[_c('i',{staticClass:\"el-icon-back me-1\"}),_vm._v(\"回上頁 \")]),_c('h2',{staticClass:\"form-title\"},[_vm._v(\"修改工程單\")]),_c('div',{staticClass:\"card rounded-1 p-3\"},[_vm._m(0),_c('span',{staticClass:\"el-text-success mb-4\"},[_vm._v(\"每一更改，系統自動以電子郵件通知相關人員(主管/上下包廠商)\")]),_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-position\":\"top\"}},[_c('el-form-item',{attrs:{\"label\":\"工程結束時間\",\"prop\":\"end_Date\"}},[(_vm.modifyProjInfoProjectDetail && _vm.modifyProjInfoProjectDetail.length)?_c('div',{staticClass:\"directions\"},[_vm._v(\"原始日期：\"+_vm._s(_vm.modifyProjInfoProjectDetail[0].begin_Date)+\" ~ \"+_vm._s(_vm.modifyProjInfoProjectDetail[0].end_Date)+\" \"),_c('br'),_vm._v(\" 工程施工期限最大為一年，延長工程的結束日期不可超過一年。 \")]):_vm._e(),_c('el-date-picker',{attrs:{\"value-format\":\"yyyy/MM/dd\",\"type\":\"date\",\"placeholder\":\"選擇日期\"},model:{value:(_vm.form.end_Date),callback:function ($$v) {_vm.$set(_vm.form, \"end_Date\", $$v)},expression:\"form.end_Date\"}})],1),_c('el-form-item',{attrs:{\"label\":\"下包廠商公司\",\"prop\":\"insSuppiler\"}},[_c('div',{staticClass:\"directions\"},[_vm._v(\"補加 若無下包商，則免填。\"),_c('br')]),_c('div',{staticClass:\"d-flex align-items-center\"},[_c('el-select',{staticClass:\"me-2\",attrs:{\"filterable\":\"\",\"multiple\":\"\",\"clearable\":\"\",\"placeholder\":\"請搜尋廠商名稱\"},model:{value:(_vm.form.insSuppiler),callback:function ($$v) {_vm.$set(_vm.form, \"insSuppiler\", $$v)},expression:\"form.insSuppiler\"}},_vm._l((_vm.modifyProjInfoSidSupplier),function(item){return _c('el-option',{key:item.s_Id,attrs:{\"label\":item.s_Name,\"value\":item.s_Id}})}),1),_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.addUnderCompanyLists()}}},[_vm._v(\"新增到列表\")])],1)]),_c('el-form-item',{attrs:{\"label\":\"已選擇承攬商列表\"}},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"border\":\"\",\"data\":_vm.modifyProjInfoVendorDetail}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"項次\",\"width\":\"50\"}}),_c('el-table-column',{attrs:{\"prop\":\"s_Status\",\"label\":\"承攬商型態\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"Compilation\",\"label\":\"承攬商(統一編號)\",\"width\":\"400\"}}),_c('el-table-column',{attrs:{\"prop\":\"ableStatus\",\"label\":\"可用狀態\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{attrs:{\"active-color\":\"#006BB2\",\"inactive-color\":\"#ABABAB\",\"active-value\":\"1\",\"inactive-value\":\"0\"},model:{value:(scope.row.deleted),callback:function ($$v) {_vm.$set(scope.row, \"deleted\", $$v)},expression:\"scope.row.deleted\"}})]}}])})],1)],1),_c('el-form-item',{attrs:{\"label\":\"新增承攬商列表\"}},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"border\":\"\",\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"項次\",\"width\":\"50\"}}),_c('el-table-column',{attrs:{\"prop\":\"s_Status\",\"label\":\"承攬商型態\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"Compilation\",\"label\":\"承攬商(統一編號)\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"每日工作申請單 發包工程師代簽人員\",\"prop\":\"insSigner\"}},[(_vm.modifyProjInfoSigner.length)?_c('div',{staticClass:\"directions mb-1\"},[_vm._v(\" 原始資料: \"),_vm._l((_vm.modifyProjInfoSigner),function(item,index){return _c('span',{key:index,staticClass:\"directions\"},[_vm._v(_vm._s(index + 1)+\". \"+_vm._s(item.name)+\"(工號: \"+_vm._s(item.emp_No)+\"/狀態: \"+_vm._s(item.per_State)+\")。\")])})],2):_vm._e(),_c('div',{staticClass:\"directions\"},[_vm._v(\"重新指定，最多 3 人\")]),_c('el-select',{ref:\"remote\",attrs:{\"multiple\":\"\",\"clearable\":\"\",\"filterable\":\"\",\"remote\":\"\",\"multiple-limit\":3,\"reserve-keyword\":\"\",\"placeholder\":\"輸入關鍵字\",\"loading\":_vm.signerLoading,\"loading-text\":\"載入中\",\"no-data-text\":\"查無資料\"},on:{\"visible-change\":_vm.visibleHandleChange},nativeOn:{\"keyup\":function($event){return _vm.signerSearchHandler($event)}},model:{value:(_vm.form.insSigner),callback:function ($$v) {_vm.$set(_vm.form, \"insSigner\", $$v)},expression:\"form.insSigner\"}},_vm._l((_vm.signerList),function(item){return _c('el-option',{key:item.EMP_NO,attrs:{\"label\":item.customLabel,\"value\":item.EMP_NO}})}),1),_c('p',{staticClass:\"note mb-0 mt-1\"},[_vm._v(_vm._s(_vm.$store.state.remoteSearchNote))])],1),_c('div',{staticClass:\"table-view\"},[_c('h3',{staticClass:\"table-view-title\"},[_vm._v(\"工程資料\")]),_vm._l((_vm.modifyProjInfoProjectDetail),function(item,index){return _c('div',{key:index,staticClass:\"table-responsive\"},[_c('table',{staticClass:\"table table-bordered\"},[_c('tbody',[_c('tr',[_c('th',[_vm._v(\"工程編號/工程名稱\")]),_c('td',[_vm._v(_vm._s(item.project_No)+\"/ \"+_vm._s(item.project_Name))])]),_c('tr',[_c('th',[_vm._v(\"開始日期~結束日期\")]),_c('td',[_vm._v(_vm._s(item.begin_Date)+\" ~ \"+_vm._s(item.end_Date))])]),_c('tr',[_c('th',[_vm._v(\"工作區域\")]),_c('td',[_vm._v(_vm._s(item.LD1)+\"/\"+_vm._s(item.LD2)+\"/\"+_vm._s(item.LD3)+\"/\"+_vm._s(item.LD4))])]),_c('tr',[_c('th',[_vm._v(\"工程狀態\")]),_c('td',[_vm._v(_vm._s(item.project_Status))])]),_c('tr',[_c('th',[_vm._v(\"建立者/建立日期\")]),_c('td',[_vm._v(_vm._s(item.emp_Name)+\"/\"+_vm._s(item.emp_No)+\"/(\"+_vm._s(item.create_Date)+\")\")])])])])])})],2),_c('div',{staticClass:\"table-view\"},[_c('h3',{staticClass:\"table-view-title\"},[_vm._v(\"承攬商資料\")]),_vm._l((_vm.projectVendorDetail),function(item,index){return _c('div',{key:index,staticClass:\"table-responsive\"},[_c('table',{staticClass:\"table table-bordered\"},[_c('tbody',[_c('tr',[_c('th',[_vm._v(\"承攬商型態\")]),_c('td',{attrs:{\"colspan\":\"3\"}},[_vm._v(_vm._s(item.vendor_Type === \"S\" ? \"下承包商\" : \"主承包商\"))])]),_c('tr',[_c('th',[_vm._v(\"承攬商\")]),_c('td',{attrs:{\"colspan\":\"3\"}},[_vm._v(_vm._s(item.s_Name))])]),_c('tr',[_c('th',[_vm._v(\"統一編號\")]),_c('td',[_vm._v(_vm._s(item.s_Id))]),_c('th',[_vm._v(\"聯絡電話\")]),_c('td',[_vm._v(_vm._s(item.tel))])]),_c('tr',[_c('th',[_vm._v(\"電子郵件(Email)/通知\")]),_c('td',{attrs:{\"colspan\":\"3\"}},[_vm._v(_vm._s(item.email))])])])])])})],2)],1)],1)],1),_c('div',{staticClass:\"position-fixed\"},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.resetForm('form')}}},[_vm._v(\"重設\")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('form')}}},[_vm._v(\"送出\")])],1)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"card-text fw-normal\"},[_vm._v(\"目前開放可修改項目：\"),_c('br'),_vm._v(\" 延長工程時間、增加下包廠商、更新指定發包工程師審核(代理簽核人員) \")])\n}]\n\nexport { render, staticRenderFns }","<script>\nexport default {\n  name: \"engineeringDataManagementEdit-component\",\n  data() {\n    let validateDate = (rule, value, callback) => {\n      const beginDate = this.modifyProjInfoProjectDetail[0].begin_Date;\n      const diff = new Date(value) - new Date(beginDate);\n\n      if (beginDate > value || diff / 86400000 > 365) {\n        callback(new Error(\"結束日不得早於起始日，且施工期限最長為一年\"));\n      } else {\n        callback();\n      }\n    };\n    return {\n      subcontractor: [],\n      signerLoading: false,\n      signerList: [],\n      form: {\n        prjNo: \"\",\n        end_Date: \"\",\n        insSuppiler: [],\n        insSigner: [],\n        chgSuppiler: [],\n      },\n      tableData: [],\n      rules: {\n        end_Date: [\n          { required: true, message: \"必填\", trigger: \"change\" },\n          { validator: validateDate, trigger: \"change\" },\n        ],\n        insSuppiler: [{ required: false, message: \"必填\", trigger: \"change\" }],\n      },\n      modifyProjInfoVendorDetail: [],\n      modifyProjInfoProjectDetail: [],\n      modifyProjInfoSidSupplier: [],\n      projectVendorDetail: [],\n      modifyProjInfoSigner: [],\n    };\n  },\n  computed: {},\n  methods: {\n    goBack() {\n      this.$router.go(-1);\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n    submitForm(formName) {\n      this.form.chgSuppiler = this.modifyProjInfoVendorDetail;\n      this.$refs[formName].validate(async (valid) => {\n        if (valid) {\n          this.addChgStateProject();\n        } else {\n          this.$message({\n            type: \"error\",\n            duration: 5000,\n            showClose: true,\n            message: \"資料填寫錯誤\",\n          });\n        }\n      });\n    },\n    async addChgStateProject() {\n      try {\n        await this.$store.dispatch(\"addChgStateProject\", this.form);\n        this.$message({\n          type: \"success\",\n          duration: 5000,\n          showClose: true,\n          message: \"新增成功\",\n        });\n        this.$router.push({ name: \"engineeringDataManagement\" });\n      } catch (err) {\n        console.log(err);\n      }\n    },\n    // 把遠程搜尋資料跟值清除\n    visibleHandleChange(e) {\n      if (!e) {\n        this.signerList = [];\n        this.$refs.remote.query = \"\";\n      }\n    },\n    signerSearchHandler(evt) {\n      this.signerLoading = true;\n      if (evt.code === \"Enter\" || evt.code === \"NumpadEnter\") {\n        this.signerLoading = false;\n        if (!evt.target.value) return;\n        this.getEditSigner(evt.target.value);\n      }\n    },\n    async getEditSigner(query) {\n      const res = await this.$store.dispatch(\"getEditSigner\", {\n        query,\n        prjNo: this.form.prjNo,\n      });\n      this.signerList = res.data.data;\n      this.signerList.forEach((e) => (e.customLabel = `${e.EMP_NO}_${e.NAME}`));\n    },\n    addUnderCompanyLists() {\n      this.form.insSuppiler.forEach((e, index) => {\n        const obj = {\n          id: index + 1,\n          s_Id: e,\n          s_Status: \"下承包商\",\n          Compilation: `${this.getSName(e)}(${this.getIeNo(e)})`,\n        };\n        this.tableData.push(obj);\n        const set = new Set();\n        this.tableData = this.tableData.filter((item) =>\n          !set.has(item.s_Id) ? set.add(item.s_Id) : false\n        );\n      });\n    },\n    // 取得s_Name\n    getSName(s_Id) {\n      const name = this.modifyProjInfoSidSupplier.find((e) => e.s_Id === s_Id);\n      if (name) {\n        return name.s_Name;\n      }\n    },\n    // 取得s_Id\n    getIeNo(s_Id) {\n      const name = this.modifyProjInfoSidSupplier.find((e) => e.s_Id === s_Id);\n      if (name) {\n        return name.s_Id;\n      }\n    },\n    async getModifyProjInfo(prjNo, id) {\n      const res = await this.$store.dispatch(\"getModifyProjInfo\", {\n        prjNo,\n        id,\n      });\n      const data = res.data.data;\n      this.modifyProjInfoVendorDetail = data.vendor_Detail;\n      if (this.modifyProjInfoVendorDetail.length) {\n        this.modifyProjInfoVendorDetail.forEach((e, index) => {\n          e.id = index + 1;\n          e.s_Status = \"下承包商\";\n          e.Compilation = `${e.s_Name}(${e.s_Id})`;\n          e.sid = e.s_Id;\n        });\n      }\n      this.modifyProjInfoProjectDetail = data.proj_Detail;\n      this.modifyProjInfoSidSupplier = data.sid_Supplier;\n      this.modifyProjInfoSigner = data.signer;\n      this.getProjDetail(prjNo);\n    },\n    // 篩選出vendor_Type是\"S\"的資料\n    async getProjDetail(prjNo) {\n      const res = await this.$store.dispatch(\"getProjDetail\", prjNo);\n      const data = res.data.data;\n      this.projectVendorDetail = data.vendor_Detail;\n      this.subcontractor = this.projectVendorDetail.filter(\n        (e) => e.vendor_Type === \"S\"\n      );\n    },\n  },\n  async mounted() {\n    const prjNo = this.$route.params.prjNo;\n    const id = this.$route.params.id;\n    this.form.prjNo = prjNo;\n    this.getModifyProjInfo(prjNo, id);\n\n    this.$store.commit(\"HEADER_HANDLER\", true);\n    this.$store.commit(\"BREADCRUMB_HANDLER\", true);\n    this.$root.$children[0].sidebarSwitch = true;\n\n    const positionFixed = document.querySelector(\".position-fixed\");\n    const formContainer = document.querySelector(\".form-container\");\n\n    const positionFixedHeight = positionFixed.offsetHeight;\n    formContainer.style.marginBottom = `${positionFixedHeight}px`;\n  },\n};\n</script>\n\n<template src=\"./engineeringDataManagementEdit.html\"></template>\n<style lang=\"sass\" scoped src=\"../../../../public/styles/custom.sass\"></style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./engineeringDataManagementEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./engineeringDataManagementEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./engineeringDataManagementEdit.html?vue&type=template&id=4f9c1969&scoped=true&\"\nimport script from \"./engineeringDataManagementEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./engineeringDataManagementEdit.vue?vue&type=script&lang=js&\"\nimport style0 from \"../../../../public/styles/custom.sass?vue&type=style&index=0&id=4f9c1969&prod&lang=sass&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4f9c1969\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","directives","name","rawName","value","$root","overlay","expression","modifiers","staticClass","attrs","on","$event","goBack","_v","_m","ref","form","rules","modifyProjInfoProjectDetail","length","_s","begin_Date","end_Date","_e","model","callback","$$v","$set","insSuppiler","_l","modifyProjInfoSidSupplier","item","key","s_Id","s_Name","addUnderCompanyLists","staticStyle","modifyProjInfoVendorDetail","scopedSlots","_u","fn","scope","row","deleted","tableData","modifyProjInfoSigner","index","emp_No","per_State","signerLoading","visibleHandleChange","nativeOn","signerSearchHandler","insSigner","signerList","EMP_NO","customLabel","$store","state","remoteSearchNote","project_No","project_Name","LD1","LD2","LD3","LD4","project_Status","emp_Name","create_Date","projectVendorDetail","vendor_Type","tel","email","resetForm","submitForm","staticRenderFns","data","validateDate","rule","beginDate","diff","Date","Error","subcontractor","prjNo","chgSuppiler","required","message","trigger","validator","computed","methods","$router","go","formName","$refs","resetFields","validate","valid","addChgStateProject","$message","type","duration","showClose","dispatch","push","err","console","log","e","remote","query","evt","code","target","getEditSigner","res","forEach","NAME","obj","id","s_Status","Compilation","getSName","getIeNo","set","Set","filter","has","add","find","vendor_Detail","sid","proj_Detail","sid_Supplier","signer","getProjDetail","$route","params","getModifyProjInfo","commit","$children","sidebarSwitch","positionFixed","document","querySelector","formContainer","positionFixedHeight","offsetHeight","style","marginBottom","component"],"sourceRoot":""}