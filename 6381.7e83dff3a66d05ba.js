"use strict";(self["webpackChunkinnolux"]=self["webpackChunkinnolux"]||[]).push([[6381],{4865:function(t,e,a){a.d(e,{Z:function(){return d}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{layout:"total, prev, pager, next, jumper",total:t.totalLength,"current-page":t.currentPage},on:{"current-change":t.changePage}})],1)},s=[],o={name:"pagination1-component",props:["totalLength"],computed:{currentPage(){return this.$store.state.currentPage}},methods:{changePage(t){this.$emit("changePageHandler",t)}},mounted(){}},i=o,n=a(1001),l=(0,n.Z)(i,r,s,!1,null,"86225bf4",null),d=l.exports},1919:function(t,e,a){a.d(e,{Z:function(){return d}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"table-responsive"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.data,"row-key":t.getRowKeys,"default-sort":{prop:"id",order:"ascending"},"empty-text":"查無資料","cell-class-name":t.rowStyleHandler,border:"","highlight-current-row":""},on:{"selection-change":t.selectChangeHandler}},[t._t("custom-selection"),t._t("custom-checkbox1"),t._t("custom-checkbox2"),t._l(t.tableColumns,(function(a,r){return e("el-table-column",{key:r,attrs:{prop:a.id,label:a.label,width:a.width,sortable:"date"===a.id},scopedSlots:t._u([{key:"default",fn:function(r){return["status"===a.id?e("el-tag",{attrs:{type:"簽核通過"===r.row.status||"審核通過"===r.row.status?"success":"拒絕申請"===r.row.status?"danger":"草稿"===r.row.status?"warning":"查無資料"}},[t._v(" "+t._s(r.row.status)+" ")]):"status_Id"===a.id?e("el-tag",{attrs:{type:"OPEN"===r.row.status_Id?"":"CLOSE"===r.row.status_Id?"danger":"FULL"===r.row.status_Id?"warning":"success"}},[t._v(" "+t._s(t.getCourseState(r.row.status_Id))+" ")]):"description2"===a.id?e("el-tag",{attrs:{type:"有效課程"===r.row.description?"":"danger"}},[t._v(" "+t._s(r.row.description)+" ")]):"approve_Status"===a.id?e("el-tag",{attrs:{type:"0"===r.row.approve_Status?"":"1"===r.row.approve_Status?"success":"danger"}},[t._v(" "+t._s(t.getApproveStatus(r.row.approve_Status))+" ")]):"approve_Status2"===a.id?e("el-tag",{attrs:{type:"審核中"===r.row.approve_Status2||"未審核"===r.row.approve_Status2?"":"審核完畢"===r.row.approve_Status2||"審核同意"===r.row.approve_Status2?"success":"danger"}},[t._v(" "+t._s(r.row.approve_Status2)+" ")]):"attend_Status"===a.id?e("el-tag",{attrs:{type:"0"===r.row.attend_Status?"":"1"===r.row.attend_Status?"success":"danger"}},[t._v(" "+t._s(t.getAttendStatus(r.row.attend_Status))+" ")]):"issue_Card"===a.id?e("el-tag",{attrs:{type:"0"===r.row.issue_Card?"":"1"===r.row.issue_Card?"success":"danger"}},[t._v(" "+t._s(t.getIssueCardStatus(r.row.issue_Card))+" ")]):"signUpStatus"===a.id?e("el-tag",{attrs:{type:"已結案"===t.signUpStatus(r.row.signUpStatus,r.row.approveStatus)?"success":"可取消報名"===t.signUpStatus(r.row.signUpStatus,r.row.approveStatus)?"danger":""}},[t._v(" "+t._s(t.signUpStatus(r.row.signUpStatus,r.row.approveStatus))+" ")]):"file_Name"===a.id||"d_File_Name"===a.id?e("a",{attrs:{href:"#"},on:{click:function(e){return t.downloadPdf(r.row)}}},[t._v(t._s(r.row[a.id]))]):"protocolInfo"===a.id?e("div",[e("div",[t._v(t._s(r.row.po_Name))]),t._l(r.row.files,(function(a){return e("div",[e("a",{attrs:{href:"#"},on:{click:function(e){return t.downloadPdf(a)}}},[t._v(t._s(a.file_Name))])])}))],2):"useable"===a.id&&"已刪除(廠商不可申請每日工單)"===r.row.useable?e("span",{staticStyle:{color:"red"}},[t._v(t._s(r.row.useable))]):"deleted"===a.id?e("span",{class:{"text-danger":"1"===r.row.deleted}},[t._v(" "+t._s(r.row.effect)+" ")]):"array_data"===a.id?e("span",t._l(r.row[a.id],(function(a,r){return e("p",{key:r,staticClass:"mb-0"},[t._v(t._s(a))])})),0):RegExp(/\n/).test(r.row[r.column.property])?e("span",{staticStyle:{"white-space":"pre-wrap"}},[t._v(" "+t._s(r.row[a.id])+" ")]):e("span",[t._v(t._s(r.row[a.id]))])]}}],null,!0)})})),t._t("custom-edit-select"),t._t("custom-switch"),t._t("custom-function"),t._t("slot-sheet-open")],2)],1)},s=[],o={name:"table-component",props:["data","tableColumns"],data(){return{api:this.apiUrl,loading:!0}},methods:{selectChangeHandler(t){this.$emit("selectionChange",t)},downloadPdf(t){const e=t.file_Id;this.$emit("downloadPdfHandler",e),this.$emit("downloadPdfHandler2",t)},getRowKeys(t){return t.index?t.index:t.id},rowStyleHandler(t){if("1"===t.row.isWeekend||"1"===t.row.isNight)return"fontColorBlue"}},mounted(){this.data&&(this.loading=!1)}},i=o,n=a(1001),l=(0,n.Z)(i,r,s,!1,null,"4a0f1604",null),d=l.exports},6381:function(t,e,a){a.r(e),a.d(e,{default:function(){return p}});var r=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:this.$root.overlay,expression:"this.$root.overlay",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"wrapper"},[e("el-button",{staticClass:"goBack",attrs:{type:"text"},on:{click:function(e){return t.goBack()}}},[e("i",{staticClass:"el-icon-back me-1"}),t._v("回上頁 ")]),e("h2",{staticClass:"form-title"},[t._v("資料查詢")]),e("el-card",{staticClass:"mb-4",attrs:{shadow:"never"}},[e("el-form",{ref:"form",attrs:{rules:t.rules,model:t.form}},[e("div",{staticClass:"d-flex"},[e("el-form-item",{staticClass:"w-100",attrs:{label:"廠商名稱"}},[e("el-input",{attrs:{placeholder:"請輸入廠商名稱"},model:{value:t.form.SupplierShortName,callback:function(e){t.$set(t.form,"SupplierShortName",e)},expression:"form.SupplierShortName"}})],1),e("el-form-item",{staticClass:"w-100 ms-2",attrs:{label:"施工日期"}},[e("el-date-picker",{staticClass:"w-100",attrs:{type:"daterange","value-format":"yyyy/MM/dd","range-separator":"～","start-placeholder":"開始日期","end-placeholder":"結束日期"},model:{value:t.form.WorkDate,callback:function(e){t.$set(t.form,"WorkDate",e)},expression:"form.WorkDate"}})],1)],1),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.search()}}},[t._v("查詢")]),e("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(e){return t.exportExcel()}}},[t._v("匯出Excel")])],1)],1),e("h2",{staticClass:"form-title"},[t._v("施工紀錄")]),e("TableComponent",{attrs:{data:t.tableList,tableColumns:t.tableColumns}}),e("PaginationComponent",{attrs:{totalLength:t.tableData.length},on:{changePageHandler:t.changePage}})],1)},s=[],o=a(1919),i=a(4865),n=a(942),l={name:"dataQueryComponent",components:{TableComponent:o.Z,PaginationComponent:i.Z},data(){return{form:{SupplierShortName:"",WorkDate:[],WorkDate1:"",WorkDate2:""},rules:{},tableColumns:[{id:"index",label:"項次",width:"70"},{id:"apply_Pk",label:"施工單號",width:"150"},{id:"work_Date",label:"施工日",width:"150"},{id:"location_Id",label:"廠區",width:"150"},{id:"location_Type_Description",label:"FAB",width:"150"},{id:"floor",label:"主區域",width:"150"},{id:"area_Name",label:"次區域",width:"150"},{id:"supplier_Short_Name",label:"承攬商名稱",width:"150"},{id:"work_Type_Count",label:"特殊工種數",width:"150"},{id:"array_data",label:"工種",width:"200"}],data:[],tableData:[],tableList:[]}},computed:{},methods:{goBack(){this.$router.go(-1)},changePage(t){const e=10*(t-1),a=10*t;this.tableList=this.tableData.slice(e,a),this.$store.state.currentPage=t},async search(){null===this.form.WorkDate&&(this.form.WorkDate=[]),this.form.WorkDate.length?(this.form.WorkDate1=this.form.WorkDate[0],this.form.WorkDate2=this.form.WorkDate[1]):(this.form.WorkDate1="",this.form.WorkDate2="");const t=this.getURLNewParams(this.form);this.data=await this.$store.dispatch("constructionMgmQryTodayWorkForQuery",t),this.data.forEach(((t,e)=>{t.index=e+1,t.array_data=t.work_Type_Name})),this.tableData=JSON.parse(JSON.stringify(this.data)),this.tableList=this.tableData.slice(0,10),this.$store.state.currentPage=1},async exportExcel(){null===this.form.WorkDate&&(this.form.WorkDate=[]),this.form.WorkDate.length?(this.form.WorkDate1=this.form.WorkDate[0],this.form.WorkDate2=this.form.WorkDate[1]):(this.form.WorkDate1="",this.form.WorkDate2="");const t=await this.$store.dispatch("commonExportExcel",{obj:this.form,router_Name:n.getConstructionMgm,action_Name:"ExportTodayWorkForQuery"});this.downloadFile(t,"資料查詢","xlsx")}},mounted(){this.$store.commit("HEADER_HANDLER",!0),this.$store.commit("BREADCRUMB_HANDLER",!0),this.$root.$children[0].sidebarSwitch=!0,this.factory=JSON.parse(this.$route.params.params),this.$route.meta.breadcrumb[1].name=this.factory.description,this.form={...this.form,...this.factory},this.$store.state.currentPage=1}},d=l,u=a(1001),c=(0,u.Z)(d,r,s,!1,null,null,null),p=c.exports}}]);
//# sourceMappingURL=6381.7e83dff3a66d05ba.js.map