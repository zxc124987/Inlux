{"version":3,"file":"8373.d7e2c6b4e9b4a470.js","mappings":"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","sources":["webpack://innolux/./src/components/Upload/Upload.html","webpack://innolux/src/components/Upload/Upload.vue","webpack://innolux/./src/components/Upload/Upload.vue?136d","webpack://innolux/./src/components/Upload/Upload.vue","webpack://innolux/./src/views/VendorLicense/addLicenseInformation/addLicenseInformation.html","webpack://innolux/src/views/VendorLicense/addLicenseInformation/addLicenseInformation.vue","webpack://innolux/./src/views/VendorLicense/addLicenseInformation/addLicenseInformation.vue?0d88","webpack://innolux/./src/views/VendorLicense/addLicenseInformation/addLicenseInformation.vue"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"upload\"},[_c('el-upload',{ref:\"Upload\",staticClass:\"upload-demo\",attrs:{\"limit\":_vm.limitNumber,\"action\":_vm.uploadAction,\"auto-upload\":false,\"on-change\":_vm.changeHandler,\"on-remove\":_vm.removeHandler}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"上傳檔案\")]),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(_vm._s(_vm.uploadTipText))])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport configSetting from \"../../../public/config/customSetting.json\";\nexport default {\n  name: \"upload-component\",\n  data() {\n    return {};\n  },\n  props: {\n    uploadTipText: {\n      type: [String],\n      default: \"檔案格式為PDF，在2MB以內\",\n    },\n    uploadAction: {\n      type: [String],\n      default: configSetting.apiUrl,\n    },\n    limitNumber: {\n      type: Number,\n      default: 1,\n    },\n  },\n  methods: {\n    changeHandler(file, fileList) {\n      this.$emit(\"fileChangeHandler\", fileList);\n    },\n    removeHandler(file, fileList) {\n      this.$emit(\"fileRemoveHandler\", fileList);\n    },\n  },\n  mounted() {},\n};\n</script>\n\n<template src=\"./Upload.html\"></template>\n<style lang=\"sass\" scoped src=\"../../../public/styles/custom.sass\"></style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Upload.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Upload.html?vue&type=template&id=442b61f1&scoped=true&\"\nimport script from \"./Upload.vue?vue&type=script&lang=js&\"\nexport * from \"./Upload.vue?vue&type=script&lang=js&\"\nimport style0 from \"../../../public/styles/custom.sass?vue&type=style&index=0&id=442b61f1&prod&lang=sass&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"442b61f1\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading.fullscreen.lock\",value:(this.$root.overlay),expression:\"this.$root.overlay\",modifiers:{\"fullscreen\":true,\"lock\":true}}],staticClass:\"wrapper\"},[_c('h2',{staticClass:\"form-title\"},[_vm._v(\"新增證照資料\")]),_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules}},[_c('el-row',[_c('el-col',{staticClass:\"px-1\",staticStyle:{\"margin-right\":\"20px\"},attrs:{\"span\":6}},[_c('el-form-item',{attrs:{\"label\":\"身份證字號\",\"prop\":\"Id\"}},[_c('el-input',{model:{value:(_vm.form.Id),callback:function ($$v) {_vm.$set(_vm.form, \"Id\", $$v)},expression:\"form.Id\"}})],1)],1),_c('el-col',{staticClass:\"px-1\",attrs:{\"span\":6}},[_c('el-form-item',{attrs:{\"label\":\"姓名\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1)],1)],1),_c('el-row',[_c('el-col',{staticClass:\"px-1\",attrs:{\"span\":6}},[_c('el-form-item',{attrs:{\"label\":\"證照類別\",\"prop\":\"License_Pk\"}},[_c('el-select',{attrs:{\"placeholder\":\"請選擇\"},model:{value:(_vm.form.License_Pk),callback:function ($$v) {_vm.$set(_vm.form, \"License_Pk\", $$v)},expression:\"form.License_Pk\"}},_vm._l((_vm.typeList),function(item){return _c('el-option',{key:item.LICENSE_PK,attrs:{\"label\":item.LICENSE_TYPE,\"value\":item.LICENSE_PK}})}),1)],1)],1)],1),_c('el-row',[_c('el-col',{staticClass:\"px-1\",staticStyle:{\"margin-right\":\"20px\"},attrs:{\"span\":6}},[_c('el-form-item',{attrs:{\"label\":\"證照初訓日期\",\"prop\":\"Begin_Data\"}},[_c('el-date-picker',{attrs:{\"type\":\"date\",\"placeholder\":\"選擇日期\",\"value-format\":\"yyyy/MM/dd\"},model:{value:(_vm.form.Begin_Data),callback:function ($$v) {_vm.$set(_vm.form, \"Begin_Data\", $$v)},expression:\"form.Begin_Data\"}})],1)],1),_c('el-col',{staticClass:\"px-1\",attrs:{\"span\":6}},[_c('el-form-item',{attrs:{\"label\":\"證照有效截止日期\",\"prop\":\"End_Data\"}},[_c('el-date-picker',{attrs:{\"type\":\"date\",\"placeholder\":\"選擇日期\",\"value-format\":\"yyyy/MM/dd\"},model:{value:(_vm.form.End_Data),callback:function ($$v) {_vm.$set(_vm.form, \"End_Data\", $$v)},expression:\"form.End_Data\"}})],1)],1)],1),_c('el-row',[_c('el-col',{staticClass:\"px-1\",attrs:{\"span\":6}},[_c('el-form-item',{attrs:{\"label\":\"證照號碼\",\"prop\":\"License_Id\"}},[_c('el-input',{model:{value:(_vm.form.License_Id),callback:function ($$v) {_vm.$set(_vm.form, \"License_Id\", $$v)},expression:\"form.License_Id\"}})],1)],1)],1),_c('el-form-item',{attrs:{\"label\":\"初訓證照上傳\",\"prop\":\"file\"}},[_c('Upload',{ref:\"fileRef\",attrs:{\"uploadTipText\":\"初訓檔案上傳後即無法刪除，欲刪除請通知安衛部人員\"},on:{\"fileChangeHandler\":_vm.fileHandleChange,\"fileRemoveHandler\":_vm.fileHandleRemove},model:{value:(_vm.form.file),callback:function ($$v) {_vm.$set(_vm.form, \"file\", $$v)},expression:\"form.file\"}})],1)],1),_c('div',{staticClass:\"btn-group mt-3\"},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.resetForm('form')}}},[_vm._v(\"重設\")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('form')}}},[_vm._v(\"送出\")])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- Lynn -->\r\n<script>\r\nimport Upload from \"@/components/Upload/Upload.vue\";\r\n\r\nexport default {\r\n  name: \"addLicenseInformation-component\",\r\n  components: { Upload },\r\n  data() {\r\n    return {\r\n      form: {\r\n        Id: \"\", // 身份證字號\r\n        name: \"\", // 姓名\r\n        License_Pk: \"\", // 證照類別\r\n        Begin_Data: \"\", // 證照初訓日期\r\n        End_Data: \"\", // 證照有效截止日期\r\n        License_Id: \"\", // 證照號碼\r\n        file: \"\", // 初訓證照\r\n      },\r\n      rules: {\r\n        Id: [\r\n          { required: true, message: \"必填\", trigger: \"blur\" },\r\n          { validator: this.validateCard, trigger: \"blur\" },\r\n        ],\r\n        name: [{ required: true, message: \"必填\", trigger: \"blur\" }],\r\n        License_Pk: [{ required: true, message: \"必填\", trigger: \"change\" }],\r\n        Begin_Data: [{ required: true, message: \"必填\", trigger: \"change\" }],\r\n        End_Data: [\r\n          { required: true, message: \"必填\", trigger: \"change\" },\r\n          { validator: this.validateDate, trigger: \"change\" },\r\n        ],\r\n        License_Id: [{ required: true, message: \"必填 \", trigger: \"blur\" }],\r\n        file: [{ required: true, message: \"必填\", trigger: \"change\" }],\r\n      },\r\n    };\r\n  },\r\n  computed: {\r\n    // 證照類別總清單\r\n    typeList() {\r\n      return this.$store.state.license_type;\r\n    },\r\n  },\r\n  methods: {\r\n    // 檢查身分證有效性，並代入員工姓名\r\n    validateCard(rule, value, callback) {\r\n      let staff = this.$store.state.license_people.filter((x) => x.id == value);\r\n      if (!staff.length) {\r\n        callback(new Error(\"查無人員資料，請確認該身份證字號已建立\"));\r\n      } else {\r\n        this.form.name = staff[0].p_Name;\r\n        callback();\r\n      }\r\n    },\r\n    // 檢查證照截止日期 ≥ 今日\r\n    validateDate(rule, value, callback) {\r\n      let end = new Date(value).getTime() / 1000;\r\n      let full = new Date();\r\n      let today =\r\n        new Date(\r\n          full.getFullYear(),\r\n          full.getMonth(),\r\n          full.getDate()\r\n        ).getTime() / 1000;\r\n\r\n      if (end < today) {\r\n        callback(new Error(\"證照有效期限已過期\"));\r\n      } else {\r\n        callback();\r\n      }\r\n    },\r\n\r\n    fileHandleChange(file) {\r\n      this.form.file = file[0].raw;\r\n      this.$refs.form.clearValidate(\"file\");\r\n    },\r\n    fileHandleRemove() {\r\n      this.form.file = \"\";\r\n      this.$refs.fileRef.$refs.Upload.clearFiles();\r\n      this.$refs.form.validateField(\"file\");\r\n    },\r\n\r\n    resetForm(formName) {\r\n      this.$refs[formName].resetFields();\r\n      this.$refs.fileRef.$refs.Upload.clearFiles();\r\n    },\r\n    submitForm(formName) {\r\n      // 檢查人員 [身分證,姓名] 組合存在\r\n      let staff = this.$store.state.license_people.filter(\r\n        (x) => x.id == this.form.Id && x.p_Name == this.form.name\r\n      );\r\n      if (!staff.length) {\r\n        this.$message({\r\n          type: \"error\",\r\n          showClose: true,\r\n          message: \"人員資料有誤，請確認輸入內容\",\r\n        });\r\n      } else {\r\n        // 檢查證照截止日期 > 初訓日\r\n        let start = new Date(this.form.Begin_Data).getTime() / 1000;\r\n        let end = new Date(this.form.End_Data).getTime() / 1000;\r\n\r\n        if (start >= end) {\r\n          this.$message({\r\n            type: \"error\",\r\n            showClose: true,\r\n            message: \"證照有效截止日期需大於證照初證日期\",\r\n          });\r\n        } else {\r\n          this.$refs[formName].validate(async (valid) => {\r\n            if (valid) {\r\n              let formData = this.changeFormData(this.form);\r\n              try {\r\n                const res = await this.$store.dispatch(\r\n                  \"addLicenseInfo\",\r\n                  formData\r\n                );\r\n                if (res.data.isOK) {\r\n                  this.$message({\r\n                    type: \"success\",\r\n                    duration: 5000,\r\n                    showClose: true,\r\n                    message: \"新增成功\",\r\n                  });\r\n                  // 清除新增證照表單\r\n                  this.resetForm(formName);\r\n                }\r\n              } catch (err) {\r\n                console.log(err);\r\n              }\r\n            } else {\r\n              this.$message({\r\n                type: \"error\",\r\n                duration: \"5000\",\r\n                showClose: true,\r\n                message: \"資料填寫錯誤\",\r\n              });\r\n            }\r\n          });\r\n        }\r\n      }\r\n    },\r\n  },\r\n  async mounted() {\r\n    this.$store.commit(\"HEADER_HANDLER\", true);\r\n    this.$store.commit(\"BREADCRUMB_HANDLER\", true);\r\n    this.$root.$children[0].sidebarSwitch = true;\r\n\r\n    // 打 API 取得證照類別及人員資料\r\n    try {\r\n      await this.$store.dispatch(\"getLicenseFormInfo\");\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<template src=\"./addLicenseInformation.html\"></template>\r\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./addLicenseInformation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./addLicenseInformation.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./addLicenseInformation.html?vue&type=template&id=7c380bcb&\"\nimport script from \"./addLicenseInformation.vue?vue&type=script&lang=js&\"\nexport * from \"./addLicenseInformation.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","ref","attrs","limitNumber","uploadAction","changeHandler","removeHandler","_v","slot","_s","uploadTipText","staticRenderFns","name","data","props","type","String","default","configSetting","Number","methods","file","fileList","$emit","mounted","component","directives","rawName","value","$root","overlay","expression","modifiers","form","rules","staticStyle","model","Id","callback","$$v","$set","License_Pk","_l","typeList","item","key","LICENSE_PK","LICENSE_TYPE","Begin_Data","End_Data","License_Id","on","fileHandleChange","fileHandleRemove","$event","resetForm","submitForm","components","Upload","required","message","trigger","validator","validateCard","validateDate","computed","$store","state","license_type","rule","staff","license_people","filter","x","id","length","p_Name","Error","end","Date","getTime","full","today","getFullYear","getMonth","getDate","raw","$refs","clearValidate","fileRef","clearFiles","validateField","formName","resetFields","start","$message","showClose","validate","valid","formData","changeFormData","res","dispatch","isOK","duration","err","console","log","commit","$children","sidebarSwitch"],"sourceRoot":""}